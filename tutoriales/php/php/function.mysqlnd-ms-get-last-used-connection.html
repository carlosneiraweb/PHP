<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Devuelve un array que describe la &uacute;ltima conexi&oacute;n usada</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysqlnd-ms-get-last-gtid.html">mysqlnd_ms_get_last_gtid</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysqlnd-ms-get-stats.html">mysqlnd_ms_get_stats</a></div>
 <div class="up"><a href="ref.mysqlnd-ms.html">Funciones de mysqlnd_ms</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.mysqlnd-ms-get-last-used-connection" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqlnd_ms_get_last_used_connection</h1>
  <p class="verinfo">(PECL mysqlnd_ms &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">mysqlnd_ms_get_last_used_connection</span> &mdash; <span class="dc-title">Devuelve un array que describe la última conexión usada</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.mysqlnd-ms-get-last-used-connection-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> 
   <span class="methodname"><strong>mysqlnd_ms_get_last_used_connection</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$connection</code></span>
   )</div>

  <p class="para rdfs-comment">
   Devuelve un array que describe la última conexión usada desde la agrupación de
   conexiones del complemento apuntada por el gestro de conexión del usuario. Si se usa el
   complemento, un gestor de conexión de usuario representa una agrupación de conexiones a bases de datos.
   No es posible indicar, desde las propiedades del gestor de conexión de usuario, a qué
   servidor de bases de datos de la agrupación apunta el gestor de conexión de usuario.
  </p>
  <p class="para">
   La función se puede usar para depurar o monitorizar PECL mysqlnd_ms.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.mysqlnd-ms-get-last-used-connection-parameters">
  <h3 class="title">Parámetros</h3>
  <dl>

   
    <dt>
<code class="parameter">connection</code></dt>

    <dd>

     <p class="para">
      Un gestor de conexión MySQL obtenido desde cualquiera de las
      funciones de conexión de las extensiones <a href="ref.mysqli.html" class="link">mysqli</a>,
      <a href="ref.mysql.html" class="link">mysql</a> o
      <a href="ref.pdo-mysql.html" class="link">PDO_MYSQL</a>.
     </p>
    </dd>

   
  </dl>

 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.mysqlnd-ms-get-last-used-connection-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   <strong><code>FALSE</code></strong> en caso de error. De otro modo, un
   array que describe la conexión usada para
   ejecutar la última sentencia.
  </p>
  <p class="para">
   El array que describe la conexión.
  </p>
  <table class="doctable informaltable">
   
    <col width="1*" />
    <col width="7*" />
    <col width="2*" />
    <thead>
     <tr>
      <th>Propiedad</th>
      <th>Descripción</th>
      <th>Versión</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>
       <em>scheme</em>
      </td>
      <td>
       El esquema de la conexión. Puede ser <em>tcp://host:port</em>
       o <em>unix://host:socket</em>. Si se han de distinguir
       las conexiones unas de otras se ha de usar una combinación
       de <em>scheme</em> y <em>thread_id</em> como clave
       única. Ni <em>scheme</em> ni <em>thread_id</em>
       por sí solos son suficientes para distinguir dos conexiones entre sí.
       Dos servidores puede asignar el mismo <em>thread_id</em> a dos
       conexiones diferentes. Por lo tanto, las conexiones de la agrupación podrían tener el mismo
       <em>thread_id</em>. También, no se debe depender de la unicidad de
       <em>scheme</em> de una agrupación. Los ingenieros de controlo de calidad podrían
       usar la misma instancia del servidor MySQL para dos roles lógicos distintos y añadirla
       múltiples veces a la agrupación. Esta técnica se usa, por ejemplo,
       en la batería de pruebas.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <em>host</em>
      </td>
      <td>
       El equipo anfitrión servidor de las bases de datos usado para la conexión.
       Este equipo solamente se establece con conexiones TCP/IP.
       Está vacío con conexiones de dominio Unix o tuberías con nombre de Windows.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <em>host_info</em>
      </td>
      <td>
       Una cadena de caracteres que representa el nombre del equipo anfitrión servidor y el tipo de conexión.
      </td>
      <td>Desde 1.1.2.</td>
     </tr>

     <tr>
      <td>
       <em>port</em>
      </td>
      <td>
       El puerto del servidor de las bases de datos usado con la conexión.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <em>socket_or_pipe</em>
      </td>
      <td>
       El socket de dominio Unix o la tubería con nombre de Windows usados con la conexión.
       Este valor está vacío para conexiones TCP/IP.
      </td>
      <td>Desde 1.1.2.</td>
     </tr>

     <tr>
      <td>
       <em>thread_id</em>
      </td>
      <td>
       El id del subproceso de conexión.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <em>last_message</em>
      </td>
      <td>
       Un mensaje de información obtenido desde la
       función mysql_info() de la API en C de MySQL. Véase
       <span class="function"><a href="mysqli.info.html" class="function">mysqli_info()</a></span> para
       una descripción.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <em>errno</em>
      </td>
      <td>
       El código del error.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <em>error</em>
      </td>
      <td>
       El mensaje de error.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <em>sqlstate</em>
      </td>
      <td>
       El códgio SQLstate del error.
      </td>
      <td>Desde 1.1.0.</td>
     </tr>

    </tbody>
   
  </table>

 </div>

 
 <div class="refsect1 unknown-returnvaluet" id="refsect1-function.mysqlnd-ms-get-last-used-connection-unknown-returnvaluet">
  <h3 class="title">Notas</h3>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    <span class="function"><strong>mysqlnd_ms_get_last_used_connection()</strong></span> requiere
    PHP &gt;= 5.4.0 y PECL mysqlnd_ms &gt;= 1.2.0. Internamente, se utiliza
    una funcionalidad en C de la biblioteca <em>mysqlnd</em> no disponble en PHP 5.3.
   </p>
  </p></blockquote>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.mysqlnd-ms-get-last-used-connection-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   Este ejemplo asume que <em>myapp</em> se refiere a una sección del
   fichero de configuración del complemento y que representa una agrupación de conexiones.
  </p>
  <p class="para">
   <div class="example" id="example-2074">
    <p><strong>Ejemplo #1 Ejemplo de <span class="function"><strong>mysqlnd_ms_get_last_used_connection()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$enlace&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"myapp"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"usuario"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"contraseña"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"base_datos"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$resultado&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$enlace</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;1&nbsp;FROM&nbsp;DUAL"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mysqlnd_ms_get_last_used_connection</span><span style="color: #007700">(</span><span style="color: #0000BB">$enlace</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(10) {
  [&quot;scheme&quot;]=&gt;
  string(22) &quot;unix:///tmp/mysql.sock&quot;
  [&quot;host_info&quot;]=&gt;
  string(25) &quot;Localhost via UNIX socket&quot;
  [&quot;host&quot;]=&gt;
  string(0) &quot;&quot;
  [&quot;port&quot;]=&gt;
  int(3306)
  [&quot;socket_or_pipe&quot;]=&gt;
  string(15) &quot;/tmp/mysql.sock&quot;
  [&quot;thread_id&quot;]=&gt;
  int(46253)
  [&quot;last_message&quot;]=&gt;
  string(0) &quot;&quot;
  [&quot;errno&quot;]=&gt;
  int(0)
  [&quot;error&quot;]=&gt;
  string(0) &quot;&quot;
  [&quot;sqlstate&quot;]=&gt;
  string(5) &quot;00000&quot;
}
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysqlnd-ms-get-last-gtid.html">mysqlnd_ms_get_last_gtid</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysqlnd-ms-get-stats.html">mysqlnd_ms_get_stats</a></div>
 <div class="up"><a href="ref.mysqlnd-ms.html">Funciones de mysqlnd_ms</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
