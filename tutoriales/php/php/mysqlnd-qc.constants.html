<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Constantes predefinidas</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqlnd-qc.configuration.html">Configuraci&oacute;n en tiempo de ejecuci&oacute;n</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ref.mysqlnd-qc.html">Funciones de mysqlnd_qc</a></div>
 <div class="up"><a href="book.mysqlnd-qc.html">mysqlnd_qc</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mysqlnd-qc.constants" class="appendix">
 <h1>Constantes predefinidas</h1>

 <p class="simpara">
Estas constantes están definidas por esta extensión y
estarán disponibles sólo cuando la extensión haya sido
compilada con PHP, o bien sea cargada dinámicamente en ejecución.
</p>
 <p class="para">
  <em class="emphasis">Relacionadas con sugerencias SQL</em>
 </p>
 <p class="para">
  <div class="example" id="example-2095">
   <p><strong>Ejemplo #1 Usar constantes de sugerencias SQL</strong></p>
   <div class="example-contents"><p>
    La caché de consultas está constrolada por sugerencias SQL. Las sugerencias SQL se usan para habilitar y
    deshabilitar el almacenamiento en la caché. Las sugerencias SQL se pueden usar para establecer el
    <em>TTL</em> de una consulta.
   </p></div>
   <div class="example-contents"><p>
    Las sugerencias SQL reconocidas por la caché de consultas se pueden cambiar manualmente en
    tiempo de compilación. Esto hace posible usar
    <em>mysqlnd_qc</em> en entornos en los cuales las sugerencias SQL
    predeterminadas ya son tomadas e interpretadas por otros sistemas. Por lo tanto,
    se recomienda usar constantes de cadena de sugerencias SQL en lugar de
    añadir manualmente las sugerencias SQL predeterminadas a las cadenas de consulta.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Usar&nbsp;constantes&nbsp;para&nbsp;una&nbsp;portabilidad&nbsp;máxima&nbsp;*/<br /></span><span style="color: #0000BB">$consulta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/*"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">MYSQLND_QC_ENABLE_SWITCH&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"*/SELECT&nbsp;id&nbsp;FROM&nbsp;test"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;Válido&nbsp;pero&nbsp;menos&nbsp;portable:&nbsp;TTL&nbsp;predeterminado&nbsp;*/<br /></span><span style="color: #0000BB">$consulta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/*qc=on*/SELECT&nbsp;id&nbsp;FROM&nbsp;test"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;Válido&nbsp;pero&nbsp;menos&nbsp;portable:&nbsp;TTL&nbsp;por&nbsp;sentencia&nbsp;*/<br /></span><span style="color: #0000BB">$consulta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"/*qc=on*//*qc_ttl=5*/SELECT&nbsp;id&nbsp;FROM&nbsp;test"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"MYSQLND_QC_ENABLE_SWITCH:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQLND_QC_ENABLE_SWITCH</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"MYSQLND_QC_DISABLE_SWITCH:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQLND_QC_DISABLE_SWITCH</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"MYSQLND_QC_TTL_SWITCH:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQLND_QC_TTL_SWITCH</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>El resultado de los ejemplos sería:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
MYSQLND_QC_ENABLE_SWITCH: qc=on
MYSQLND_QC_DISABLE_SWITCH: qc=off
MYSQLND_QC_TTL_SWITCH: qc_ttl=

</pre></div>
   </div>
   
  </div>
 </p>
 
 <p class="para">
  <dl>

   
    <dt id="constant.mysqlnd-qc-enable-switch">
     <strong><code>MYSQLND_QC_ENABLE_SWITCH</code></strong>
     (<span class="type"><a href="language.types.string.html" class="type string">string</a></span>)
    </dt>

    <dd>

     <span class="simpara">
      Sugerencia SQL usada para habilitar el almacenamiento en caché de una consulta.
     </span>
    </dd>

   
   
    <dt id="constant.mysqlnd-qc-disable-switch">
     <strong><code>MYSQLND_QC_DISABLE_SWITCH</code></strong>
     (<span class="type"><a href="language.types.string.html" class="type string">string</a></span>)
    </dt>

    <dd>

     <span class="simpara">
      Sugerencia SQL usada para deshabilitar el almacenamiento en caché de una consulta si
      <em>mysqlnd_qc.cache_by_default = 1</em>.
     </span>
    </dd>

   
   
    <dt id="constant.mysqlnd-qc-ttl-switch">
     <strong><code>MYSQLND_QC_TTL_SWITCH</code></strong>
     (<span class="type"><a href="language.types.string.html" class="type string">string</a></span>)
    </dt>

    <dd>

     <span class="simpara">
      Sugerencia SQL usada para establecer el TTL de un conjunto de resultados.
     </span>
    </dd>

   
   
    <dt id="constant.mysqlnd-qc-server-id">
     <strong><code>MYSQLND_QC_SERVER_ID_SWITCH</code></strong>
     (<span class="type"><a href="language.types.string.html" class="type string">string</a></span>)
    </dt>

    <dd>

     <span class="simpara">
      Esta sugerencia SQL no debería usarse en general.
     </span>
     <span class="simpara">
      Es necesaria para <a href="book.mysqlnd-ms.html" class="link">PECL/mysqlnd_ms</a>
      para agrupar entradas de la caché para una sentencia,
      excepto que originándose desde diferentes conexiones físicas. Si se
      usa esta sugerencia, las configuraciones de la conexión como el usuario, el nombre del host y el conjunto de caracteres,
      no son consideradas para generar una clave de caché de una consulta.
      En su lugar, se usan el valor dado y la cadena de consulta como entrada
      para la función de hash que genera la clave.
     </span>
     <span class="simpara">
      PECL/mysqlnd_ms podría, si se le indica, almacenar en la caché resultados de
      los esclavos de Replicación MySQL. Ya que puede contener muchas conexiones
      al esclavo, la clave de la caché no será formada a partir de las configuraciones
      de usuario, nombre de host u otras configuraciones que podrían variar para las diferentes
      conexiones esclavas. En su lugar, PECL/mysqlnd_ms proporciona un identificador
      que hace referencia al grupo de conexiones esclavas que serán habilitadas
      para compartir las entradas en la caché sin importar cual era la conexión física esclava
      para generar la entrada en la caché.
     </span>
     <span class="simpara">
      No se recomienda el uso de esta característica fuera de PECL/mysqlnd_ms.
     </span>
    </dd>

   
  </dl>

 </p>
 <p class="para">
  Relacionadas con <em class="emphasis"><span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span></em>
 </p>
 <p class="para">
  <div class="example" id="example-2096">
   <p><strong>Ejemplo #2 Ejemplo del uso de <span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span></strong></p>
   <div class="example-contents"><p>
    La función <span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span> permite establecer las condiciones
    para el almacenamiento en caché de sentencias que no comienzan con las sugerencias SQL
    necesarias para habilitar el almacenamiento en caché manual.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Almacenar&nbsp;en&nbsp;caché&nbsp;todos&nbsp;los&nbsp;accesos&nbsp;a&nbsp;tablas&nbsp;con&nbsp;nombre&nbsp;"new%"&nbsp;en&nbsp;el&nbsp;esquema/base&nbsp;de&nbsp;datos&nbsp;"bd_ejemplo"&nbsp;durante&nbsp;1&nbsp;segundo&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">mysqlnd_qc_set_cache_condition</span><span style="color: #007700">(</span><span style="color: #0000BB">MYSQLND_QC_CONDITION_META_SCHEMA_PATTERN</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"bd_ejemplo.new%"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;die(</span><span style="color: #DD0000">"¡Error&nbsp;al&nbsp;establecer&nbsp;la&nbsp;condición&nbsp;de&nbsp;la&nbsp;caché!"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"host"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"usuario"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"contraseña"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"bd_ejemplo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"puerto"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">/*&nbsp;almacenada&nbsp;en&nbsp;caché&nbsp;aunque&nbsp;no&nbsp;se&nbsp;proporcionó&nbsp;una&nbsp;sugerencia&nbsp;SQL&nbsp;&nbsp;*/<br /></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;title&nbsp;FROM&nbsp;news"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$pdo_mysql&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=host;dbname=bd_ejemplo;port=puerto"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"usuario"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"contraseña"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">/*&nbsp;no&nbsp;almacenada&nbsp;en&nbsp;caché:&nbsp;sin&nbsp;sugerencia&nbsp;SQL,&nbsp;el&nbsp;patrón&nbsp;no&nbsp;coincide&nbsp;*/<br /></span><span style="color: #0000BB">$pdo_mysql</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;title&nbsp;FROM&nbsp;latest_news"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">/*&nbsp;almacenado&nbsp;en&nbsp;caché:&nbsp;TTL&nbsp;1&nbsp;segundo,&nbsp;el&nbsp;patrón&nbsp;coincide&nbsp;*/<br /></span><span style="color: #0000BB">$pdo_mysql</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,&nbsp;title&nbsp;FROM&nbsp;news"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  <dl>

   
    <dt id="constant.mysqlnd-qc-condition-meta-schema-pattern">
     <strong><code>MYSQLND_QC_CONDITION_META_SCHEMA_PATTERN</code></strong>
     (<span class="type"><a href="language.types.integer.html" class="type int">int</a></span>)
    </dt>

    <dd>

     <span class="simpara">
      Usada como parámetro de <span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span>
      para establecer las condiciones del almacenamiento en caché automático basado en esquemas.
     </span>
    </dd>

   
  </dl>

 </p>
 <p class="para">
  <em class="emphasis">Otras</em>
 </p>
 <p class="para">
  El número de versión del complemento se puede obtener usando
  <strong><code>MYSQLND_QC_VERSION</code></strong>, que es la representación de tipo string 
  del número de verisón numérica, o <strong><code>MYSQLND_QC_VERSION_ID</code></strong>, 
  que es un integer como 10000. Los desarrolladores puede calcular el número de versión
  como sigue:
 </p>
 <p class="para">
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Versión (parte)</th>
      <th>Ejemplo</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>Mayor*10000</td>
      <td>1*10000 = 10000</td>
     </tr>

     <tr>
      <td>Menor*100</td>
      <td>0*100 = 0</td>
     </tr>

     <tr>
      <td>Parche</td>
      <td>0 = 0</td>
     </tr>

     <tr>
      <td>MYSQLND_QC_VERSION_ID</td>
      <td>10000</td>
     </tr>

    </tbody>
   
  </table>

 </p>
 <p class="para">
  <dl>

   
    <dt id="constant.mysqlnd-qc-version">
     <strong><code>MYSQLND_QC_VERSION</code></strong>
     (<span class="type"><a href="language.types.string.html" class="type string">string</a></span>)
    </dt>

    <dd>

     <span class="simpara">
      String con la versión del complemento, por ejemplo, "<span class="quote">1.0.0-prototype</span>".
     </span>
    </dd>

   
  </dl>

 </p>
 <p class="para">
  <dl>

   
    <dt id="constant.mysqlnd-qc-version-id">
     <strong><code>MYSQLND_QC_VERSION_ID</code></strong>
     (<span class="type"><a href="language.types.integer.html" class="type int">int</a></span>)
    </dt>

    <dd>

     <span class="simpara">
      Número de versión del complemento, por ejemplo, 10000.
     </span>
    </dd>

   
  </dl>

 </p>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqlnd-qc.configuration.html">Configuraci&oacute;n en tiempo de ejecuci&oacute;n</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ref.mysqlnd-qc.html">Funciones de mysqlnd_qc</a></div>
 <div class="up"><a href="book.mysqlnd-qc.html">mysqlnd_qc</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
