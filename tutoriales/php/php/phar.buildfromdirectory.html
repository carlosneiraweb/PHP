<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Construir un archivo phar desde los ficheros de un directorio</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="phar.apiversion.html">Phar::apiVersion</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="phar.buildfromiterator.html">Phar::buildFromIterator</a></div>
 <div class="up"><a href="class.phar.html">Phar</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="phar.buildfromdirectory" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Phar::buildFromDirectory</h1>
  <p class="verinfo">(PHP &gt;= 5.3.0, PECL phar &gt;= 2.0.0)</p><p class="refpurpose"><span class="refname">Phar::buildFromDirectory</span> &mdash; <span class="dc-title">Construir un archivo phar desde los ficheros de un directorio</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-phar.buildfromdirectory-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><strong>Phar::buildFromDirectory</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$base_dir</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$regex</code></span>
  ] )</div>

  <blockquote class="note"><p><strong class="note">Nota</strong>: <p class="para">Este
método requiere que la opción de <var class="filename">php.ini</var> <em>phar.readonly</em> esté establecida
a <em>0</em> para que trabaje con objetos <a href="class.phar.html" class="classname">Phar</a>.
De otra manera, se lanzará una excepción de tipo <a href="class.pharexception.html" class="classname">PharException</a>.</p></p></blockquote>
  <p class="para">
   Rellena un archivo phar con el contenido de un directorio. El segundo parámtro
   opcional es una expresión regular (pcre) que se utiliza para excluir ficheros.
   Cualquier nombre de fichero que coincida con la expresión regular será incluido, todos los demás serán
   excluidos. Para un control más exhaustivo, use <span class="function"><a href="phar.buildfromiterator.html" class="function">Phar::buildFromIterator()</a></span>.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-phar.buildfromdirectory-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">base_dir</code></dt>

     <dd>

      <p class="para">
       La ruta completa o relativa al directorio que contiene todos los ficheros
       a añadir al archivo.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">regex</code></dt>

     <dd>

      <p class="para">
       Una expresión regular de pcre opcional que se usa para filtrar la
       lista de ficheros. Solamente las rutas de fichero que coincidan con la expresión regular
       serán incluidas en el archivo.
      </p>
     </dd>

    
   </dl>

  </p>
  
 </div>

 <div class="refsect1 returnvalues" id="refsect1-phar.buildfromdirectory-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   <span class="function"><strong>Phar::buildFromDirectory()</strong></span> devuelve un array asociativo que
   que mapea la ruta interna del fichero a la ruta completa del mismo en el
   sistema de ficheros.
  </p>
 </div>

 
 <div class="refsect1 errors" id="refsect1-phar.buildfromdirectory-errors">
  <h3 class="title">Errores/Excepciones</h3>
  <p class="para">
   Este método lanza una excepción de tipo <a href="class.badmethodcallexception.html" class="classname">BadMethodCallException</a> cuando no puede
   instanciar los iteradores intermos del directorio,
   o una excepción de tipo <a href="class.pharexception.html" class="classname">PharException</a> si hubo errores
   al guardar el archivo phar.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-phar.buildfromdirectory-examples">
  <h3 class="title">Ejemplos</h3>
  <div class="example" id="example-740">
   <p><strong>Ejemplo #1 Un ejemplo de <span class="function"><strong>Phar::buildFromDirectory()</strong></span></strong></p>
   <div class="example-contents"><p>
    
   </p></div>
   <div class="example-contents"><p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;crear&nbsp;con&nbsp;el&nbsp;alias&nbsp;"proyecto.phar"<br /></span><span style="color: #0000BB">$phar&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Phar</span><span style="color: #007700">(</span><span style="color: #DD0000">'proyecto.phar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'proyecto.phar'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;añadir&nbsp;todos&nbsp;los&nbsp;ficheros&nbsp;del&nbsp;proyecto<br /></span><span style="color: #0000BB">$phar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildFromDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'/proyecto'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$phar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setStub</span><span style="color: #007700">(</span><span style="color: #0000BB">$phar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDefaultStub</span><span style="color: #007700">(</span><span style="color: #DD0000">'cli/index.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'www/index.php'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$phar2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Phar</span><span style="color: #007700">(</span><span style="color: #DD0000">'proyecto2.phar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'proyecto2.phar'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;añadir&nbsp;todos&nbsp;los&nbsp;ficheros&nbsp;del,&nbsp;incluir&nbsp;solamente&nbsp;los&nbsp;ficheros&nbsp;php<br /></span><span style="color: #0000BB">$phar2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildFromDirectory</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'/proyecto'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/\.php$/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$phar2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setStub</span><span style="color: #007700">(</span><span style="color: #0000BB">$phar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDefaultStub</span><span style="color: #007700">(</span><span style="color: #DD0000">'cli/index.php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'www/index.php'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </p></div>
  </div>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-phar.buildfromdirectory-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="phar.buildfromiterator.html" class="function" rel="rdfs-seeAlso">Phar::buildFromIterator()</a> - Construir un archivo phar desde un iterador</span></li>
   </ul>
  </p>
 </div>

 
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="phar.apiversion.html">Phar::apiVersion</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="phar.buildfromiterator.html">Phar::buildFromIterator</a></div>
 <div class="up"><a href="class.phar.html">Phar</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
