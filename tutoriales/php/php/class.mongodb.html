<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>La clase MongoDB</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongoclient.tostring.html">MongoClient::__toString</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongodb.authenticate.html">MongoDB::authenticate</a></div>
 <div class="up"><a href="mongo.core.html">Clases del n&uacute;cleo</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.mongodb" class="reference">
 
 <h1 class="title">La clase MongoDB</h1>
 
 
 <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>
  
  
  <div class="section" id="mongodb.intro">
   <h2 class="title">Introducción</h2>
   <p class="para">
    Las instancias de esta clase se utilizan para interactuar con la base de datos. Para
    seleccionar una base de datos:
    <div class="example" id="example-1516">
     <p><strong>Ejemplo #1 Seleccionar una base de datos</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;conectar<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"ejemplo"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    Los nombres de bases de datos pueden utilizar prácticamente cualquier carácter del rango ASCII.
    Sin embargo no pueden contener ni &quot; &quot;, &quot;.&quot; ni un texto vacío.
    El nombre &quot;system&quot; también está reservado.
   </p>
   <p class="para">
    Hay algunos nombres poco usuales de bases de datos que sí son válidos: &quot;null&quot;, &quot;[x,y]&quot;, &quot;3&quot;, &quot;\&quot;&quot;, &quot;/&quot;.
   </p>
   <p class="para">
    A diferencia de los nombres de colecciones, los nombres bases de datos pueden contener &quot;$&quot;.
   </p>
  </div>
  
  
  <div class="section" id="mongodb.synopsis">
   <h2 class="title">Sinopsis de la Clase</h2>
   
   
   <div class="classsynopsis">
    <div class="ooclass"></div>
    
    
    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">MongoDB</strong>
     </span>
     {</div>
    
    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constantes */</div>
    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="class.mongodb.html#mongodb.constants.profilingoff"><var class="varname">PROFILING_OFF</var></a></var>
     <span class="initializer"> = 0</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="class.mongodb.html#mongodb.constants.profilingslow"><var class="varname">PROFILING_SLOW</var></a></var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="class.mongodb.html#mongodb.constants.profilingon"><var class="varname">PROFILING_ON</var></a></var>
     <span class="initializer"> = 2</span>
    ;</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Campos */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.mongodb.html#mongodb.props.w">$<var class="varname">w</var></a></var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.mongodb.html#mongodb.props.wtimeout">$<var class="varname">wtimeout</var></a></var>
     <span class="initializer"> = 10000</span>
    ;</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Métodos */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.authenticate.html" class="methodname">authenticate</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.command.html" class="methodname">command</a></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter reference">&$hash</code></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="mongodb.construct.html" class="methodname">__construct</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.mongoclient.html" class="type MongoClient">MongoClient</a></span> <code class="parameter">$conn</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname"><a href="mongodb.createcollection.html" class="methodname">createCollection</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.createdbref.html" class="methodname">createDBRef</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$document_or_id</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.drop.html" class="methodname">drop</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.dropcollection.html" class="methodname">dropCollection</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$coll</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.execute.html" class="methodname">execute</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$code</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$args</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongodb.forceerror.html" class="methodname">forceError</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname"><a href="mongodb.get.html" class="methodname">__get</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.getcollectioninfo.html" class="methodname">getCollectionInfo</a></span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.getcollectionnames.html" class="methodname">getCollectionNames</a></span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.getdbref.html" class="methodname">getDBRef</a></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoGridFS</span> <span class="methodname"><a href="mongodb.getgridfs.html" class="methodname">getGridFS</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = &quot;fs&quot;</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="mongodb.getprofilinglevel.html" class="methodname">getProfilingLevel</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.getreadpreference.html" class="methodname">getReadPreference</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongodb.getslaveokay.html" class="methodname">getSlaveOkay</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.getwriteconcern.html" class="methodname">getWriteConcern</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.lasterror.html" class="methodname">lastError</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.listcollections.html" class="methodname">listCollections</a></span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.preverror.html" class="methodname">prevError</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.repair.html" class="methodname">repair</a></span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$preserve_cloned_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$backup_original_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongodb.reseterror.html" class="methodname">resetError</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname"><a href="mongodb.selectcollection.html" class="methodname">selectCollection</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="mongodb.setprofilinglevel.html" class="methodname">setProfilingLevel</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongodb.setreadpreference.html" class="methodname">setReadPreference</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongodb.setslaveokay.html" class="methodname">setSlaveOkay</a></span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongodb.setwriteconcern.html" class="methodname">setWriteConcern</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$w</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="mongodb.--tostring.html" class="methodname">__toString</a></span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
   
   
  </div>
  
  <div class="section">
   <h2 class="title">Constantes predefinidas</h2>
   <div class="section" id="mongodb.constants.types">
    <h2 class="title">Niveles de Logs de MongoDB</h2>
    <dl>

     
     
      <dt id="mongodb.constants.profilingoff"><strong><code>MongoDB::PROFILING_OFF</code></strong></dt>

      <dt>
<strong><code>0</code></strong></dt>

      <dd>

       <span class="simpara">
        Profiling deshabilitado.
       </span>
      </dd>

     
     
      <dt id="mongodb.constants.profilingslow"><strong><code>MongoDB::PROFILING_SLOW</code></strong></dt>

      <dt>
<strong><code>1</code></strong></dt>

      <dd>

       <span class="simpara">
        Profiling habilitado para operaciones lentas (&gt;100 ms).
       </span>
      </dd>

     
     
      <dt id="mongodb.constants.profilingon"><strong><code>MongoDB::PROFILING_ON</code></strong></dt>

      <dt>
<strong><code>2</code></strong></dt>

      <dd>

       <span class="simpara">
        Profiling habilitado para todas las operaciones.
       </span>
      </dd>

     
    </dl>

   </div>
  </div>
  
  <div class="section">
   <h2 class="title">Campos</h2>
   <dl>

    
     <dt id="mongodb.props.w"><var class="varname"><var class="varname">w</var></var></dt>

     <dt>
1</dt>

     <dd>

      <p class="para">
       Número de servidores en los que replicar los cambios antes de retornar éxito.
       Se hereda por las instancias de <a href="class.mongocollection.html" class="classname">MongoCollection</a> que deriven de
       este objeto. <em>w</em> sólo está disponible en versiones
       1.5.1+ del servidor MongoDB y 1.0.8+ del driver.
      </p>
      <p class="para">
       <em>w</em> se usa cada vez que sea necesario ajustar el nivel
       de aceptación
       (<span class="function"><a href="mongocollection.insert.html" class="function">MongoCollection::insert()</a></span>, 
       <span class="function"><a href="mongocollection.update.html" class="function">MongoCollection::update()</a></span>, 
       <span class="function"><a href="mongocollection.remove.html" class="function">MongoCollection::remove()</a></span>, 
       <span class="function"><a href="mongocollection.save.html" class="function">MongoCollection::save()</a></span>, y
       <span class="function"><a href="mongocollection.ensureindex.html" class="function">MongoCollection::ensureIndex()</a></span> soportan esta
       opción). Con el valor predeterminado (1), una operación aceptada devolverá una vez
       que el servidor de bases de datos obtenga la operación. Si el servidor se cayera
       antes de que la operación fuera replicada a un secundario, podría perderse la operación
       de forma permanente. De esta forma, se puede especificar en <em>w</em> un valor
       superior a uno para garantizar que al menos un secundario ha recibido la operación antes
       de que se considere que ha habido éxito.
      </p>
      <p class="para">
       Por ejemplo, si <em>w</em> fuera 2, el primario y un secundario
       tendrán un registro de la operación o el controlador lanzará una
       <a href="class.mongocursorexception.html" class="classname">MongoCursorException</a>. Puede ser tentador establecer en
       <em>w</em> el total de secundarios + primario, pero entonces,
       si un secundario se cayera, la operación fallaría y se lanzaría una excepción,
       por lo que suele ser más seguro establecer <em>w=2</em> (primario y
       un secundario).
      </p>
     </dd>

    
    
     <dt id="mongodb.props.wtimeout"><var class="varname"><var class="varname">wtimeout</var></var></dt>

     <dt>
10000</dt>

     <dd>

      <p class="para">
       Número de milisegundos a esperar a que las réplicas de <em>MongoDB::$w</em> 
       tengan lugar. Se hereda por las instancias de <a href="class.mongocollection.html" class="classname">MongoCollection</a> que deriven de
       este objeto. <em>w</em> sólo está disponible en las versiones 1.5.1+ del
       servidor MongoDB y en las  1.0.8+ del driver.
      </p>
      <p class="para">
       A no ser que se establezca un valor en <em>wtimeout</em>, el servidor esperará eternamente
       a que se replique a <em>w</em> servidores para finalizar. Por omisión el driver
       esperará 10 segundos. Puede modificarse este valor para alterar este
       comportamiento.
      </p>
     </dd>

    
   </dl>

  </div>
  
  <div class="section">
   <h2 class="title">Ver también</h2>
   <p class="para">
    Documentación de MongoDB de <a href="http://docs.mongodb.org/manual/reference/glossary/#term-database" class="link external">&raquo;&nbsp;bases de datos</a>.
   </p>
  </div>
 </div>
 
 





 







 







 







 







 







 







 







 







 







 







 
















 







 







 
















 















 







  







 






 







 







 







 
















 
















 


 
<h2>Tabla de contenidos</h2><ul class="chunklist chunklist_reference"><li><a href="mongodb.authenticate.html">MongoDB::authenticate</a> — Iniciar sesi&oacute;n en esta base de datos</li><li><a href="mongodb.command.html">MongoDB::command</a> — Ejecuta una orden de base de datos</li><li><a href="mongodb.construct.html">MongoDB::__construct</a> — Crea una nueva base de datos</li><li><a href="mongodb.createcollection.html">MongoDB::createCollection</a> — Crea una colecci&oacute;n</li><li><a href="mongodb.createdbref.html">MongoDB::createDBRef</a> — Crea una referencia a base de datos</li><li><a href="mongodb.drop.html">MongoDB::drop</a> — Borra esta base de datos</li><li><a href="mongodb.dropcollection.html">MongoDB::dropCollection</a> — Borra una colecci&oacute;n [obsoleto]</li><li><a href="mongodb.execute.html">MongoDB::execute</a> — Ejecuta c&oacute;digo JavaScript en el servidor de bases de datos [obsoleto]</li><li><a href="mongodb.forceerror.html">MongoDB::forceError</a> — Crea un error de base de datos</li><li><a href="mongodb.get.html">MongoDB::__get</a> — Obtiene una colecci&oacute;n</li><li><a href="mongodb.getcollectioninfo.html">MongoDB::getCollectionInfo</a> — Devuelve informaci&oacute;n sobre las colecciones de esta base de datos</li><li><a href="mongodb.getcollectionnames.html">MongoDB::getCollectionNames</a> — Obtiene un array con los nombres de todas las colecciones de esta base de datos</li><li><a href="mongodb.getdbref.html">MongoDB::getDBRef</a> — Captura el documento que est&aacute; siendo apuntado por una referencia de base de datos</li><li><a href="mongodb.getgridfs.html">MongoDB::getGridFS</a> — Obtiene un objeto para trabajar con ficheros almacenados en esta base de datos</li><li><a href="mongodb.getprofilinglevel.html">MongoDB::getProfilingLevel</a> — Obtiene el nivel de perfilado (profiling) de la base de datos</li><li><a href="mongodb.getreadpreference.html">MongoDB::getReadPreference</a> — Obtener la preferencia de lectura para esta base de datos</li><li><a href="mongodb.getslaveokay.html">MongoDB::getSlaveOkay</a> — Devuelve el valor de slaveOkay de esta base de datos</li><li><a href="mongodb.getwriteconcern.html">MongoDB::getWriteConcern</a> — Obtener el asunto de escritura para esta base de datos</li><li><a href="mongodb.lasterror.html">MongoDB::lastError</a> — Comprueba si hubo un error en la &uacute;ltima operaci&oacute;n de base de datos llevada a cabo</li><li><a href="mongodb.listcollections.html">MongoDB::listCollections</a> — Obtiene un array de objetos MongoCollection para todas las colecciones de esta base de datos</li><li><a href="mongodb.preverror.html">MongoDB::prevError</a> — Comprueba el &uacute;ltimo error emitido durante una operaci&oacute;n de base de datos</li><li><a href="mongodb.repair.html">MongoDB::repair</a> — Repara y compacta esta base de datos</li><li><a href="mongodb.reseterror.html">MongoDB::resetError</a> — Limpia cualquier error de la base de datos que se haya apuntado</li><li><a href="mongodb.selectcollection.html">MongoDB::selectCollection</a> — Obtiene una colecci&oacute;n</li><li><a href="mongodb.setprofilinglevel.html">MongoDB::setProfilingLevel</a> — Establece el nivel de perfilado (profiling) de la base de datos</li><li><a href="mongodb.setreadpreference.html">MongoDB::setReadPreference</a> — Establece la preferencia de lectura para esta base de datos</li><li><a href="mongodb.setslaveokay.html">MongoDB::setSlaveOkay</a> — Cambiar el valor de slaveOkay de esta base de datos</li><li><a href="mongodb.setwriteconcern.html">MongoDB::setWriteConcern</a> — Establecer el asunto de escritura para esta base de datos</li><li><a href="mongodb.--tostring.html">MongoDB::__toString</a> — Nombre de esta base de datos</li></ul>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongoclient.tostring.html">MongoClient::__toString</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongodb.authenticate.html">MongoDB::authenticate</a></div>
 <div class="up"><a href="mongo.core.html">Clases del n&uacute;cleo</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
