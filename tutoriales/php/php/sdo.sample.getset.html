<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Establecer y obtener valores de propiedades</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="sdo.examples-basic.html">Uso b&aacute;sico</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="sdo.sample.sequence.html">Trabajar con objetos de datos secuenciados</a></div>
 <div class="up"><a href="sdo.examples.html">Ejemplos</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="sdo.sample.getset" class="section">
  <h2 class="title">Establecer y obtener valores de propiedades</h2>
  <p class="para"> En los siguientes ejemplos se asume que
   <strong class="command">$compañía</strong> es la raíz de un árbol de objetos de datos creados desde el
   esquema y el documento de ejemplo mostrado arriba.
  </p>
  <p class="para">
   <div class="example" id="example-5995">
    <p><strong>Ejemplo #1 Acceso mediante el nombre de la propiedad</strong></p>
    <div class="example-contents"><p>
     Se puede acceder a las propiedades de los objetos de datos usando la sintaxis de acceso
     de la propiedad del objeto. Lo siguiente esteblece el nombre de la compañía a &#039;Acme&#039;.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nombre&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Acme'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-5996">
    <p><strong>Ejemplo #2 Acceso mediante el nombre de la propiedad como índice de array</strong></p>
    <div class="example-contents"><p>También se puede acceder a las propiedades usando la sintaxis de array asociativo. La forma
     más sencilla utiliza el nombre de la propiedad como índice del array. Por ejemplo, lo siguiente establece
     el nombre de la compañía y obtiene el empleadoDelMes.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">'nombre'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'UltraCorp'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$edm&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">'empleadoDelMes'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-5997">
    <p><strong>Ejemplo #3 Iteración sobre objetos de datos</strong></p>
    <div class="example-contents"><p>
     Se pueden recorrer las propiedades de un objeto de datos usando <a href="control-structures.foreach.html" class="link">foreach</a>.
     Lo siguiente recorre las propiedades del empleado del mes.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$edm&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">empleadoDelMes</span><span style="color: #007700">;<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$edm&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$nombre&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$valor</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$nombre</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$valor</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p> 
     lo que imprimirá:
    </p></div>     
    <div class="example-contents">
<div class="cdata"><pre>
nombre: Jane Doe
NS: E0003
</pre></div>
    </div>

    <div class="example-contents"><p> 
     La propiedad &#039;director&#039; no se muestra porque no ha sido establecida.
    </p></div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-5998">
    <p><strong>Ejemplo #4 Acceso a propiedades polievaluadas mediante el nombre</strong></p>
    <div class="example-contents"><p>Se puede acceder a las propiedaes polievaluadas de un objeto de datos usando la sintaxis
     de nombre de la propiedad del objeto. Lo siguiente obtiene la lista de departamentos.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$departamentos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departamentos</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-5999">
    <p><strong>Ejemplo #5 Acceso a elementos de propiedades polievaluadas</strong></p>
    <div class="example-contents"><p>
     Se puede acceder a elementos de propiedades polievaluadas usando la sintaxis
     de array. Lo siguiente accede al primer departamento de la compañía.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$dpto_ta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departamentos</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6000">
    <p><strong>Ejemplo #6 Iteración sobre propiedades polievaluadas</strong></p>
    <div class="example-contents"><p>
     Las propiedades polievaluadas también se pueden recorrer usando
     <a href="control-structures.foreach.html" class="link">foreach</a>. Lo siguiente recorre los departamentos de la compañía.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departamentos&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$departamento</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br />&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Cada iteración asignará el siguiente departamento de la
     lista a la variable <strong class="command">$departamento</strong>.
    </p></div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6001">
    <p><strong>Ejemplo #7 Acceso a propiedades encadenadas</strong></p>
    <div class="example-contents"><p>Se pueden encadenar referencias a propiedades en una única línea.
     Lo siguiente establece y obtiene el nombre del primer departamento.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departamentos</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">nombre&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Tecnologías&nbsp;Emergentes'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$nombre_dpto&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departamentos</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">nombre</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>Usando la sintaxis de array asociativo, lo anterior es equivalente a</p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">'departamentos'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">'nombre'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'Tecnologías&nbsp;Emergentes'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$nombre_dpto&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">'departamentos'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">'nombre'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>En cualquier caso, la variable nombre_dpto es establecida a &#039;Tecnologías Emergentes&#039;.
    </p></div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6002">
    <p><strong>Ejemplo #8 Navegación mediante XPath</strong></p>    
    <div class="example-contents"><p>El índice de un array asociativo puede ser una expresión como la usada con XPath. Las
     expresiones válidas están definidas por un subconjunto incrementado de XPath.
    </p></div>
    <div class="example-contents"><p>
     Están admitidas las dos formas de indexar propiedades polievaluadas.
     La primera es la sintaxis de array estándar de XPath con el índice
     comenzando por uno, la segunda es una extensión de SDO para XPath con un índice
     comenzando por cero. La sintaxis estándar es:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$jane_doe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">"departamentos[1]/empleados[2]"</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>
    
    <div class="example-contents"><p>y la sintaxis de extensión para XPath de SDO es:</p></div> 
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$jane_doe&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">"departamentos.0/empleados.1"</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     Ambos ejemplos obtienen el segundo empleado del primer departamento.
    </p></div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6003">
    <p><strong>Ejemplo #9 Consulta mediante XPath</strong></p>
    <div class="example-contents"><p>
     Se puede usar XPath para consultar e identificar partes de un objeto de datos basados
     en datos de instancia. Lo siguiente recupera el director del
     departamento &#039;Tecnologías Avanzadas&#039;.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;$director_ta&nbsp;</span><span style="color: #007700">=&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">"departamentos[nombre='Tecnologías&nbsp;Avanzadas']/empleados[director=true]"</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6004">
    <p><strong>Ejemplo #10 Crear objetos de datos hijos</strong></p>
    <div class="example-contents"><p>
     Un objeto de datos puede ser una fábrica para sus objetos de datos hijos.
     Un objeto de datos hijo es automáticamente parte del grafo de datos.
     Lo siguiente añade un nuevo empleado al departamento
     &#039;Tecnologías Avanzadas&#039;.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$dpto_ta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">[</span><span style="color: #DD0000">"departamentos[nombre='Tecnologías&nbsp;Avanzadas']"</span><span style="color: #007700">];<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$nuevo_contrato&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dpto_ta</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createDataObject</span><span style="color: #007700">(</span><span style="color: #DD0000">'empleados'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$nuevo_contrato</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nombre&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'John&nbsp;Johnson'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$nuevo_contrato</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">NS&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'E0005'</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$nuevo_contrato</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">director&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6005">
    <p><strong>Ejemplo #11 Desestablecer una propiedad primitiva</strong></p>
    <div class="example-contents"><p>
     Se pueden usar las funciones <span class="function"><a href="function.isset.html" class="function">isset()</a></span> y
     <span class="function"><a href="function.unset.html" class="function">unset()</a></span> para comprobar y eliminar elementos
     de un objeto de datos.
    </p></div>
    <div class="example-contents"><p>
     Lo siguiente limpia el nombre del primer departamento.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">unset(</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departamentos</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">nombre</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6006">
    <p><strong>Ejemplo #12 Desestablecer un objeto de datos</strong></p>
    <div class="example-contents"><p>
     unset también se puede usar para eliminar un objeto de datos de un árbol.
     El siguiente ejemplo muestra a John Jones abandonando la compañía.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">unset(</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">departamentos</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">empleados</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6007">
    <p><strong>Ejemplo #13 Desestablecer una referencia a un objeto de datos</strong></p>
    <div class="example-contents"><p>
     Lo siguiente elimina el &#039;empleadoDelMes&#039; de la compañía.
     Si este fuera una relación de contención, el
     empleado sería eliminado de la compañía
     (¡probablemente no sería una buena idea echar al mejor empleado de cada mes!), 
     pero ya que es una referencia de no contención,
     el empleado al que hace referencia permanecerá en el
     departamento de la compañía,
     pero ya no será accesible mediante la propiedad empleadoDelMes.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">empleadoDelMes</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$compañía</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">empleadoDelMes</span><span style="color: #007700">);<br />&nbsp;&nbsp;}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-6008">
    <p><strong>Ejemplo #14 Acceso mediante el índice de propiedad</strong></p>
    <div class="example-contents"><p> Se pueden acceder a las propiedades de objetos de datos mediante sus índices de propiedad usando la sintaxis
     de array. El índice de propiedad es la posición en la que la definición de la propiedad
     aparece en el modelo (en este caso el esquema xml). Se puede ver en el esquema de
     arriba que el atributo del nombre de la compañía es la segunda propiedad de la compañía (la
     interfaz de SDO no hace distinción entre atributos XML y elementos). Lo siguiente
     establece el nombre de la compañía a &#039;Acme&#039;, con el mismo resultado que en el
     <a href="sdo.sample.getset.html#sdo.examples.propname" class="link">Acceso mediante el nombre de la propiedad</a>
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$compañía</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'Acme'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>Usar directamente el índice de esta manera puede ser delicado. Normalmente se
     debería prefereir la sintaxis de nombre de propiedad, aunque el índice de propiedad
     puede ser necesario en casos especiales.
    </p></div>
   </div>
  </p>
  
 </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="sdo.examples-basic.html">Uso b&aacute;sico</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="sdo.sample.sequence.html">Trabajar con objetos de datos secuenciados</a></div>
 <div class="up"><a href="sdo.examples.html">Ejemplos</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
