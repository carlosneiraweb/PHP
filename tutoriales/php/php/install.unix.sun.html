<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Servidores Sun, iPlanet y Netscape sobre Sun Solaris</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.unix.lighttpd-14.html">Lighttpd 1.4 en sistemas Unix</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.unix.commandline.html">CGI y configuraciones de l&iacute;nea de comandos</a></div>
 <div class="up"><a href="install.unix.html">Instalaci&oacute;n sobre sistemas Unix</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="install.unix.sun" class="sect1">
    <h2 class="title">Servidores Sun, iPlanet y Netscape sobre Sun Solaris</h2>
    <p class="para">
     Esta sección contiene notas y consejos específicos al servidor web Sun Java System,
     servidor web Sun ONE, instalaciones de servidores iPlanet y Netscape de PHP sobre Sun Solaris.
    </p>
    <p class="para">
     A partir de PHP 4.3.3 en adelante se pueden utilizar scripts PHP con el
     <a href="ref.nsapi.html" class="link">módulo NSAPI</a> para 
     <a href="install.unix.sun.html#install.unix.sun.specialpages" class="link">generar listados de directorio y páginas de
     errores personalizados</a>. Funciones adicionales para compatibilidad con Apache
     también se encuentran disponibles. Para soporte en servidores web actuales, léase
     la <a href="install.unix.sun.html#install.unix.sun.notes" class="link">nota sobre subpeticiones</a>.
    </p>
    <p class="para">
     Se puede encontrar más información acerca de configurar PHP para Netscape
     Enterprise Server (NES) aquí:
     <a href="http://benoit.noss.free.fr/php/install-php4.html" class="link external">&raquo;&nbsp;http://benoit.noss.free.fr/php/install-php4.html</a>
    </p>
    
    <p class="para">
     Para construir PHP con los servidores web Sun JSWS/Sun ONE WS/iPlanet/Netscape,
     introduzca el directorio de instalación apropiado para la opción
     <a href="configure.about.html#configure.with-nsapi" class="link">--with-nsapi=[DIR]</a>.
     El directorio por omisión es comúnmente
     <var class="filename">/opt/netscape/suitespot/</var>.
     Por favor también léase <var class="filename">/php-xxx-version/sapi/nsapi/nsapi-readme.txt</var>.
    </p>
    <p class="para">
     <ol type="1">
      <li class="listitem">
       <p class="para">
        Instalar los siguientes paquetes de <a href="http://www.sunfreeware.com/" class="link external">&raquo;&nbsp;
        http://www.sunfreeware.com/</a> o algún otro sitio de descargas:
        <ul class="simplelist">
         <li class="member"><var class="filename">autoconf-2.13</var></li>
         <li class="member"><var class="filename">automake-1.4</var></li>
         <li class="member"><var class="filename">bison-1_25-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">flex-2_5_4a-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">gcc-2_95_2-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">gzip-1.2.4-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">m4-1_4-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">make-3_76_1-sol26-sparc-local</var></li>
         <li class="member">
          <var class="filename">mysql-3.23.24-beta</var> (si se desea soporte para mysql)
         </li>
         <li class="member"><var class="filename">perl-5_005_03-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">tar-1.13</var> (GNU tar)</li>
        </ul>
       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        Asegurar que la ruta de acceso incluye los directorios apropiados
        <em>PATH=.:/usr/local/bin:/usr/sbin:/usr/bin:/usr/ccs/bin</em>
        y hacer que esté disponible al sistema <strong class="userinput"><code>export PATH</code></strong>.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <strong class="userinput"><code>gunzip php-x.x.x.tar.gz</code></strong> (si se tiene una distribución <var class="filename">.gz</var>,
        de lo contrario ir a 4).
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <strong class="userinput"><code>tar xvf php-x.x.x.tar</code></strong>
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Cambiarse al directorio de PHP ya extraído:
        <strong class="userinput"><code>cd ../php-x.x.x</code></strong>
       </span>
      </li>
      <li class="listitem">
       <p class="para">
        Para el siguiente paso, asegurar que
        <var class="filename">/opt/netscape/suitespot/</var> sea
        donde el servidor netscape está instalado. De no ser así, cambiar a la
        ruta de acceso correcta y ejecutar:
        <div class="example-contents">
<div class="shellcode"><pre class="shellcode">./configure --with-mysql=/usr/local/mysql \
--with-nsapi=/opt/netscape/suitespot/ \
--enable-libgcc</pre>
</div>
        </div>

       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        Ejecutar <strong class="command">make</strong> seguido por <strong class="command">make install</strong>.
       </span>
      </li>
     </ol>
    </p>
    <p class="para">
     Después de realizar la instalación base y de leer el fichero readme apropiado,
     es posible que sea necesario realizar algunos pasos adicionales de configuración.
    </p>
    <p class="formalpara">
     <h5 class="title">Instrucciones de configuración para Sun/iPlanet/Netscape</h5>
     <p class="para">
      Primeramente quizás sea necesario agregar algunas rutas de acceso al entorno <var class="varname"><var class="varname">LD_LIBRARY_PATH</var></var>
      para que el servidor encuentre todas las librerías compartidas. Esto puede hacerse de mejor manera
      en el script de arranque del servidor web. El script de arranque se encuentra comúnmente localizado
      en: <var class="filename">/ruta/al/servidor/https-servername/start</var>.
      Quizás también sea necesario editar los ficheros de configuración que están
      ubicados en: <var class="filename">/ruta/al/servidor/https-servername/config/</var>.
      <ol type="1">
       <li class="listitem">
        <p class="para">
         Agregar la siguiente línea a <var class="filename">mime.types</var> (se puede hacer
         esto por medio del servidor de administración):
         <div class="example-contents screen">
<div class="cdata"><pre>
type=magnus-internal/x-httpd-php exts=php
</pre></div>
         </div>
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Editar <var class="filename">magnus.conf</var> (para servidores &gt;= 6) u
         <var class="filename">obj.conf</var> (para servidores &lt; 6) y agregar lo siguiente,
         shlib variará dependiendo del sistema, será algo así como
         <var class="filename">/opt/netscape/suitespot/bin/libphp4.so</var>. Se deben
         colocar las siguientes líneas después de <em>mime types init</em>.
         <div class="example-contents">
<div class="cdata"><pre>
Init fn=&quot;load-modules&quot; funcs=&quot;php4_init,php4_execute,php4_auth_trans&quot; shlib=&quot;/opt/netscape/suitespot/bin/libphp4.so&quot;
Init fn=&quot;php4_init&quot; LateInit=&quot;yes&quot; errorString=&quot;Failed to initialize PHP!&quot; [php_ini=&quot;/path/to/php.ini&quot;]
</pre></div>
         </div>

         (PHP &gt;= 4.3.3) El parámetro <em>php_ini</em> es
         opcional pero con él se puede colocar <var class="filename">php.ini</var> en el directorio de
         configuración del servidor web.
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Configurar el objeto por omisión en <var class="filename">obj.conf</var>
         (para clases de servidor virtual [versión 6.0+] en
         su <var class="filename">vserver.obj.conf</var>):
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;default&quot;&gt;
.
.
.
.#NOTA esta siguiente línea debería ocurrir después de todos las líneas &#039;ObjectType&#039; y antes de todas las líneas &#039;AddLog&#039;
Service fn=&quot;php4_execute&quot; type=&quot;magnus-internal/x-httpd-php&quot; [inikey=value inikey=value ...]
.
.
&lt;/Object&gt;
</pre></div>
         </div>

         (PHP &gt;= 4.3.3) Como parámetros adicionales se pueden agregar algunos valores
         especiales de <var class="filename">php.ini</var>, por ejemplo se puede fijar una
         <em>docroot=&quot;/ruta/a/raíz_de_documentos&quot;</em> específica
         al contexto <em>php4_execute</em> es llamado. Para llaves ini boleanas
         favor de utilizar 0/1 como valor, no
         <em>&quot;On&quot;,&quot;Off&quot;,...</em>
         (esto no funcionará correctamente), por ejemplo.
         <em>zlib.output_compression=1</em> en vez de
         <em>zlib.output_compression=&quot;On&quot;</em>
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Esto es sólo necesario si se quiere configurar un directorio que solamente consiste de
         scripts de PHP (igual que un directorio <var class="filename">cgi-bin</var>):
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;x-httpd-php&quot;&gt;
ObjectType fn=&quot;force-type&quot; type=&quot;magnus-internal/x-httpd-php&quot;
Service fn=php4_execute [inikey=value inikey=value ...]
&lt;/Object&gt;
</pre></div>
         </div>

         Después de configurar un directorio en el servidor de administración y asignarle
         el estilo <em>x-httpd-php</em>. Todos los ficheros en éste se ejecutarán como PHP.
         Esto está bien para esconder el uso de PHP renombrando los ficheros a <var class="filename">.html</var>.
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Configuración de la autenticación: La autenticación PHP no puede ser utilizada con ninguna
         otra autenticación. TODA AUTENTICACION LE ES PASADA AL SCRIPT DE PHP.
         Para configurar la autenticación de PHP para el servidor entero, agregar la
         línea siguiente al objeto por omisión:
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;default&quot;&gt;
AuthTrans fn=php4_auth_trans
.
.
.
&lt;/Object&gt;
</pre></div>
         </div>

        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Para utilizar autenticación de PHP en sólo un directorio, agregar lo siguiente:
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object ppath=&quot;d:\ruta\al\directorio\auntenticado\*&quot;&gt;
AuthTrans fn=php4_auth_trans
&lt;/Object&gt;
</pre></div>
         </div>

        </p>
       </li>
      </ol>
     </p>
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      El tamaño de la pila que utiliza PHP depende de la configuración del servidor web. Si se tienen
      fallas generales con scripts de PHP muy grandes, se recomienda elevarlo con el servidor de administración
      (en la sección &quot;MAGNUS EDITOR&quot;).
     </p>
    </p></blockquote>
   
   <div class="sect2" id="install.unix.sun.phpini">
    <h3 class="title">Ambiente CGI y modificaciones recomendadas en <var class="filename">php.ini</var></h3>
    <p class="para">
     Importante cuando se escriben scripts de PHP, es el hecho de que Sun JSWS/Sun ONE
     WS/iPlanet/Netscape es un servidor web multihilos. Por ello todas las
     peticiones se corren en el mismo espacio de proceso (el espacio del servidor web
     mismo) y este espacio tiene solamente un ambiente. Si se quiere tener variables CGI
     como <em>PATH_INFO</em>, <em>HTTP_HOST</em>
     etc. la manera correcta no es intentar esto al viejo estilo de PHP con
     <span class="function"><a href="function.getenv.html" class="function">getenv()</a></span> o una manera similar (registrar globales al
     ambiente, <var class="varname"><var class="varname"><a href="reserved.variables.environment.html" class="classname">$_ENV</a></var></var>). Solamente se obtendrá el ambiente
     del servidor web que se está ejecutando. ¡Sin ninguna variable CGI válida!
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      ¿Por qué hay variables CGI (inválidas) en el ambiente?
     </p>
     <p class="para">
      Respuesta: Esto es por que se inició el proceso del servidor web desde el servidor de administración
      que ejecuta el script de arranque del servidor web, que se quería iniciar, como un script de CGI
      (¡Un script de CGI dentro del servidor de administración!). Esto es el porque el ambiente de
      el servidor web iniciado tiene algunas variables de CGI en él. Se puede probar esto
      iniciando el servidor web, no desde el servidor de administración. Utilizar
      la línea de comando como usuario root e iniciarlo manualmente - se verá
      que no hay variables de ambiente a la CGI.
     </p>
    </p></blockquote>
    <p class="para">
     Simplemente cámbiense los scripts para obtener las variables CGI de la manera correcta para
     PHP 4.x utilizando la superglobal <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER</a></var></var>. Si se tienen scripts más antiguos
     que usan <var class="varname"><var class="varname">$HTTP_HOST</var></var>, etc., se debe activar
     <em>register_globals</em> en <var class="filename">php.ini</var> y cambiar el orden de las
     variables también (importante: quitar <em>&quot;E&quot;</em> de ésta,
     porque no se necesita el entorno aquí):
     <div class="example-contents">
<div class="cdata"><pre>
variables_order = &quot;GPCS&quot;
register_globals = On
</pre></div>
     </div>

    </p>
   </div>
   
   <div class="sect2" id="install.unix.sun.specialpages">
    <h3 class="title">Uso especial para páginas de error o listados personalizados de directorios (PHP &gt;= 4.3.3)</h3>
    <p class="para">
     Se puede utilizar PHP para generar páginas de errores para <em>&quot;404 Not Found&quot;</em>
     o similares. Agregar la siguiente línea al objeto en <var class="filename">obj.conf</var> por
     cada página de error que se quiera sobreescribir:
     <div class="example-contents">
<div class="cdata"><pre>
Error fn=&quot;php4_execute&quot; code=XXX script=&quot;/path/to/script.php&quot; [inikey=value inikey=value...]
</pre></div>
     </div>

     donde <em>XXX</em> es el código de error HTTP. Favor de borrar
     cualquier otra directiva <em>Error</em> que pudiese interferir con la propia.
     Si se desea colocar una página para todos los errores que puedan existir, dejar fuera
     el parámetro <em>code</em>. El script puede obtener el código de estado HTTP
     con <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['ERROR_TYPE']</a></var></var>.
    </p>
    <p class="para">
     Otra posibilidad es generar listados de directorio personalizados.
     Solamente creando un script PHP que despliegue un listado de directorio y
     reemplazando la línea por omisión correspondiente <em>Service</em> por
     <em>type=&quot;magnus-internal/directory&quot;</em>
     en <var class="filename">obj.conf</var> con lo siguiente:
     <div class="example-contents">
<div class="cdata"><pre>
Service fn=&quot;php4_execute&quot; type=&quot;magnus-internal/directory&quot; script=&quot;/path/to/script.php&quot; [inikey=value inikey=value...]
</pre></div>
     </div>

     Para ambas páginas, de error y listados de directorio la URI original y la
     URI traducida están en las variables <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['PATH_INFO']</a></var></var> y
     <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['PATH_TRANSLATED']</a></var></var>.
    </p>
   </div>
   
   <div class="sect2" id="install.unix.sun.notes">
    <h3 class="title">Nota acerca de <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> y subpeticiones (PHP &gt;= 4.3.3)</h3>
    <p class="para">
     El módulo NSAPI ahora soporta la función <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span>
     (alias: <span class="function"><a href="function.virtual.html" class="function">virtual()</a></span>)
     para realizar subpeticiones en el servidor web e insertar el resultado en la página web.
     Esta función utiliza algunas características no documentadas de la librería NSAPI.
     En Unix el módulo automáticamente busca las funciones necesarias y las
     utiliza si están disponibles. Si no, se deshabilita <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span>.
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      Pero se advierte: El soporte para <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> es ¡¡¡EXPERIMENTAL!!!
     </p>
    </p></blockquote>
   </div>   
  </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.unix.lighttpd-14.html">Lighttpd 1.4 en sistemas Unix</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.unix.commandline.html">CGI y configuraciones de l&iacute;nea de comandos</a></div>
 <div class="up"><a href="install.unix.html">Instalaci&oacute;n sobre sistemas Unix</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
