<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Connexiones persistentes manuales (versiones hasta 1.1.4 *solamente*</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.connecting.pools.html">Agrupaci&oacute;n de conexiones (versi&oacute;n 1.2.0-1.2.12 *solamente*)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.context.html">Opciones de Contexto de flugo</a></div>
 <div class="up"><a href="mongo.connecting.html">Conexi&oacute;n</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mongo.connecting.persistent.manual" class="section">
  <h2 class="title">Connexiones persistentes manuales (versiones hasta 1.1.4 *solamente*</h2>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Esta sección no es relevante para 1.2.0+. En 1.2.0+, siempre las conexiones
    que son persistentes son administradas automáticamente por el driver. Si se utiliza
    una versión 1.2.x (pero no 1.3.x o posterior), véase
    <a href="class.mongopool.html" class="classname">MongoPool</a> para más información sobre agrupaciones.
   </p>
  </p></blockquote>
  
  <p class="para">
   Crear una nueva conexión cada vez a la base de datos es muy lento.  Para minimizar el número
   de conexiones que se necesite, se pueden usar las conexiones persistentes.  Una 
   conexión persistente es guardada por PHP, para que pueda usarse la misma conexión en
   múltiples peticiones.
  </p>
  
  <p class="para">
   Por ejemplo, este simple programa para conectarse 1000 veces a la base de datos:
  </p>
  
  <div class="example" id="mongo.connecting.no-manual-persist-example">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">1000</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  
  <p class="para">
   Esto tarda apróximadamente 18 segundos en ejecutarse. Pero si lo cambiamos para que utilice 
   una conexión persistente:
  </p>
  
  <div class="example" id="mongo.connecting.manual-persist-example">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">1000</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost:27017"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"persist"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"x"</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  
  <p class="para">
   ...tardará menos de 0.02 segundos en ejecutarse, ya que solo se realiza una sola conexión
   a la base de datos.
  </p>
  
  <p class="para">
   Las conexiones persistentes necesitan indicarse usando la variable de identificación (tal y como se muestra &quot;x&quot; 
   en el ejemplo anterior).  Para que la conexión persistente pueda usarse,
   el hostname, puerto, variable persist y las credenciales de autenticación (nombre de usuario,
   contraseña y base de datos) debe coincidir con una conexión persistente ya existente.
   De lo contrario, se creará una nueva conexión
   los datos proporcionados.
  </p>
  <p class="para">
   Las conexiones persistentes son <em class="emphasis">altamente recomendables</em> y se deberían
   usar siempre en producción a no ser que exista una razón con fundamento para hacer lo contrario.  
   La mayoría de razones por las cuales no son recomendadas para bases de datos relacionales
   son totalmente irrelevantes para MongoDB.
  </p>
 </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.connecting.pools.html">Agrupaci&oacute;n de conexiones (versi&oacute;n 1.2.0-1.2.12 *solamente*)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.context.html">Opciones de Contexto de flugo</a></div>
 <div class="up"><a href="mongo.connecting.html">Conexi&oacute;n</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
