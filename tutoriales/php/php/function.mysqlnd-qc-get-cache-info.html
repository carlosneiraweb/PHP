<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Devuelve informaci&oacute;n sobre el gestor en uso, el n&uacute;mero de entradas de la cach&eacute; y sobre las entradas de la cach&eacute;, si est&aacute; disponible</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysqlnd-qc-get-available-handlers.html">mysqlnd_qc_get_available_handlers</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysqlnd-qc-get-core-stats.html">mysqlnd_qc_get_core_stats</a></div>
 <div class="up"><a href="ref.mysqlnd-qc.html">Funciones de mysqlnd_qc</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.mysqlnd-qc-get-cache-info" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqlnd_qc_get_cache_info</h1>
  <p class="verinfo">(PECL mysqlnd_qc &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">mysqlnd_qc_get_cache_info</span> &mdash; <span class="dc-title">Devuelve información sobre el gestor en uso, el número de entradas de la caché y sobre las entradas de la caché, si está disponible</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.mysqlnd-qc-get-cache-info-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> 
   <span class="methodname"><strong>mysqlnd_qc_get_cache_info</strong></span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="para rdfs-comment">
   
  </p>
  
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.mysqlnd-qc-get-cache-info-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">Esta función no tiene parámetros.</p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.mysqlnd-qc-get-cache-info-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   Devuelve información sobre el gestor en uso, el número de entradas de la caché y sobre las entradas
   de la caché, si está disponible. Si lo está, los datos serán devueltos para las entradas
   de la caché sujetos al gestor de almacenamiento activo.
   Los gestores de almacenamiento son libres de devolver cualquier datos. Se recomienda que los gestores
   de almacenamiento devuelvan al menos los datos proporcionados por el gestor predeterminado,
   si fuera téctinamente posible.
  </p>
  <p class="para">
   El ámbito de la información es el proceso de PHP. Dependiendo del modelo de desarrollo
   de PHP, un proceso podría servir una o más peticiones.
  </p>
  <p class="para">
   Los valores se acumulan para todas las actividades de la caché en función de cada gestor de almacenamiento.
   No es posible indicar cuántas consultas se orinigan desde
   <em>mysqli</em>, <em>PDO_MySQL</em> o
   <em>mysql</em>. Las llamadas a al API contribuyen a los valores de los datos acumulados. Use
   <span class="function"><a href="function.mysqlnd-qc-get-core-stats.html" class="function">mysqlnd_qc_get_core_stats()</a></span>
   para obtener los tiempos de los datos acumulados para todos los gestores de almacenamiento.
  </p>
  <p class="para">
   Array de información de la caché
  </p>
  <p class="para">
   <dl>

    
     <dt>

      <code class="parameter">handler</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       El gestor de almacenamiento activo.
      </p>
      <p class="para">
       Todos los gestores de almacenamiento. Desde 1.0.0.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">handler_version</code>
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     </dt>

     <dd>

      <p class="para">
       La versión del gestor de almacenamiento activo.
      </p>
      <p class="para">
       Todos los gestores de almacenamiento. Desde 1.0.0.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">num_entries</code>
      <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
     </dt>

     <dd>

      <p class="para">
       El número de entradas de la caché. El valor depende del gestor de almacenamiento en uso.
      </p>
      <p class="para">
       Los gestores de almacenamiento default, APC y SQLite proporcinan el número real
       de entradas de la caché.
      </p>
      <p class="para">
       El gestor de almacenamiento MEMCACHE siempre devuelve <em>0</em>.
       MEMCACHE no admite el conteo del número de entradas de la caché.
      </p>
      <p class="para">
       Si se utiliza un gestor definido por el usuario, se informará del número
       de entradas de la propiedad <em>data</em>.
      </p>
      <p class="para">
       Desde 1.0.0.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">data</code>
      <span class="type"><a href="language.types.array.html" class="type array">array</a></span>
     </dt>

     <dd>

      <p class="para">
       La versión del gestor de almacenamiento activo.
      </p>
      <p class="para">
       Datos adicionales dependientes del gestor de almacenamiento sobre las entradas de la caché.
       A los gestores de almacenamiento se les solicita que proporcionen información similar y
       comparable. Un gestor de almacenamiento definido por el usuario es libre de devolver cualesquiera datos.
      </p>
      <p class="para">
       Desde 1.0.0.
      </p>
      <p class="para">
       El gestor de almacenamiento default proporciona la siguiente información
       para la propiedad <em>data</em>.
      </p>
      <p class="para">
       La propiedad <em>data</em>
       contiene un hash. El hash es indexado por el identificador interno de
       entradas de la caché del gestor de almacenamiento. El identificador de entradas de la caché
       es legible por los humanos y contiene la cadena de consulta que dirige la entrada de la caché.
       Por favor, véase también el ejemplo de abajo. Se proporcionan los siguientes datos para
       cada entrada de la caché.
      </p>
      <p class="para">
       <dl>

        
         <dt>

          <code class="parameter">statistics</code>
          <span class="type"><a href="language.types.array.html" class="type array">array</a></span>
         </dt>

         <dd>

          <p class="para">
           Estadísticas de la entrada de la caché.
          </p>
          <p class="para">
           Desde 1.0.0.
          </p>
          <table class="doctable informaltable">
           
            <col width="1*" />
            <col width="7*" />
            <col width="2*" />
            <thead>
             <tr>
              <th>Propiedad</th>
              <th>Descripción</th>
              <th>Versión</th>
             </tr>

            </thead>

            <tbody class="tbody">
             <tr>
              <td>
               <em>rows</em>
              </td>
              <td>
               Número de filas del conjunto de resultados almacenado en caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>stored_size</em>
              </td>
              <td>
               El tamaño del conjunto de resultados almacenado en caché en bytes. Éste es el tamaño
               de la carga útil. El valor no es conveniente para calcular el
               consumo total de memoria de todas las entradas de la caché incluyendo la
               carga adicional de las entradas de la caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>cache_hits</em>
              </td>
              <td>
               Cuantas veces se ha devuelto una entrada de la caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>run_time</em>
              </td>
              <td>
               Tiempo de ejecución de la sentencia a la que pertence la entrada de la caché.
               Éste es el tiempo de ejecución de la sentencia sin almacenar en la caché. Es el tiempo transcurrido
               entre el envío de la sentencia y la recepción de MySQL de una réplica desde MySQL.
               El tiempo ahorrado usando el complemento de caché de consultas se puede calcular
               de esta manera: <em>cache_hits * ((run_time - avg_run_time) + (store_time - avg_store_time))</em>.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>store_time</em>
              </td>
              <td>
               Tiempò de almacenamiento del conjunto de resultados de la sentencia a la que pertenece la entrada de la caché.
               Éste es el tiempo que se toma en obtener y almacenar los resultados de una sentencia
               no almacenada en caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>min_run_time</em>
              </td>
              <td>
               Tiempo mínimo de ejecución de la sentencia almacenada en caché. Cuánto tiempo se tarda
               en buscar la sentencia en la caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>min_store_time</em>
              </td>
              <td>
               Tiempo mínimo de almacenamiento de la sentencia almacenada en la caché. El tiempo que toma
               la obtención del conjunto de resultados almacenado en caché desde el medio de almacenamiento y
               decoficación.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>avg_run_time</em>
              </td>
              <td>
               Tiempo de ejecución medio de la sentencia almacenada en caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>avg_store_time</em>
              </td>
              <td>
               Tiempo de almacenamiento medio de la sentencia almacenada en caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>max_run_time</em>
              </td>
              <td>
               Tiempo de ejecución medio de la sentencia almacenada en caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>max_store_time</em>
              </td>
              <td>
               Tiempo de almacenamiento medio de la sentencia almacenada en caché.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>valid_until</em>
              </td>
              <td>
               Marca de tiempo del momento en que la entrada de la caché expira.
              </td>
              <td>Desde 1.1.0.</td>
             </tr>

            </tbody>
           
          </table>

         </dd>

        
        
         <dt>

          <code class="parameter">metadata</code>
          <span class="type"><a href="language.types.array.html" class="type array">array</a></span>
         </dt>

         <dd>

          <p class="para">
           Metadatos de la entrada de la caché.
           Éstos son los metadatos proporcionados por MySQL junto con el
           conjunto de resultados de la sentencia en cuestión. Diferentes versiones
           del servidor MySQL podrían devolver diferentes metadatos. A diferencia de
           algunas extensiones de MySQL para PHP, no se intentan ocultar
           las dependencias de la versión del servidor MySQL y los detalles de la versión desde el
           llamador. Por favor, consulte la documentación de la API en C de MySQL del
           servidor de MySQL en uso para más detalles.
          </p>
          <p class="para">
           La lista de metadatos contiene una entrada por cada columna.
          </p>
          <p class="para">
           Desde 1.0.0.
          </p>
          <table class="doctable informaltable">
           
            <col width="1*" />
            <col width="7*" />
            <col width="2*" />
            <thead>
             <tr>
              <th>Propiedad</th>
              <th>Descripción</th>
              <th>Versión</th>
             </tr>

            </thead>

            <tbody class="tbody">
             <tr>
              <td>
               <em>name</em>
              </td>
              <td>
               El nombre del campo. Dependiendo de la versión de MySQL,
               podría ser el nombre del alias del campo.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>org_name</em>
              </td>
              <td>
               El nombre del campo.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>table</em>
              </td>
              <td>
               El nombre de la tabla. Si se usó un alias para la tabla, esta propiedad
               normalmente contendrá dicho alias.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>org_table</em>
              </td>
              <td>
               El nombre de la tabla.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>db</em>
              </td>
              <td>
               El nombre de la base de datos/esquema.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>max_length</em>
              </td>
              <td>
               El ancho máximo del campo. Los detalles podrían variar según la versión del servidor MySQL.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>length</em>
              </td>
              <td>
               El ancho del campo. Los detalles podrían variar según la versión del servidor MySQL.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

             <tr>
              <td>
               <em>type</em>
              </td>
              <td>
               El tipo de datos del campo. Los detalles podrían variar según el servidor MySQL en uso.
               Éste es el valor constante del tipo de la API en C de MySQL. Se recomienda
               usar las constantes de tipo proporcionadas por la extensión <em>mysqli</em>
               para comprobar su significado. No se deberían probar ciertos valores de tipos
               comparandos con ciertos números.
              </td>
              <td>Desde 1.0.0.</td>
             </tr>

            </tbody>
           
          </table>

         </dd>

        
       </dl>

      </p>
      <p class="para">
       El gestor de almacenamiento APC devuelve la misma información
       para la propiedad <em>data</em>, excepto sin <em>metadata</em>.
       Los <em>metadata</em> de una entrada de la caché se establecen a <em>NULL</em>.
      </p>
      <p class="para">
       El gestor de almacenamiento MEMCACHE no rellena la propiedad <em>data</em>.
       Las estadísticas no están disponibles en base cada entrada de la caché con el gestor de almacenamiento
       MEMCACHE.
      </p>
      <p class="para">
       Un gestor de almacenamiento definido por el usuario es libre de proporcionar cualquier dato.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.mysqlnd-qc-get-cache-info-examples">
  <h3 class="title">Ejemplos</h3>
  <div class="example" id="example-2098">
   <p><strong>Ejemplo #1 Ejemplo de <span class="function"><strong>mysqlnd_qc_get_cache_info()</strong></span></strong></p>
   <div class="example-contents"><p>
    El ejemplo  muestra la salida desde el gestor de almacenamiento interno predeterminado (default).
    Los demás gestores de almacenamiento podría notificar datos diferentes.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Rellenar&nbsp;la&nbsp;caché,&nbsp;p.ej.&nbsp;usando&nbsp;mysqli&nbsp;*/<br /></span><span style="color: #0000BB">$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"host"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"usuario"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"contraseña"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"esquema"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"/*"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">MYSQLND_QC_ENABLE_SWITCH&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"*/SELECT&nbsp;id&nbsp;FROM&nbsp;test"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;Mostrar&nbsp;la&nbsp;información&nbsp;de&nbsp;la&nbsp;caché&nbsp;*/<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mysqlnd_qc_get_cache_info</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>El resultado de los ejemplos sería:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
array(4) {
 [&quot;num_entries&quot;]=&gt;
 int(1)
 [&quot;handler&quot;]=&gt;
 string(7) &quot;default&quot;
 [&quot;handler_version&quot;]=&gt;
 string(5) &quot;1.0.0&quot;
 [&quot;data&quot;]=&gt;
 array(1) {
   [&quot;Localhost via UNIX socket 3306 user schema|/*qc=on*/SELECT id FROM test&quot;]=&gt;
   array(2) {
     [&quot;statistics&quot;]=&gt;
     array(11) {
       [&quot;rows&quot;]=&gt;
       int(6)
       [&quot;stored_size&quot;]=&gt;
       int(101)
       [&quot;cache_hits&quot;]=&gt;
       int(0)
       [&quot;run_time&quot;]=&gt;
       int(471)
       [&quot;store_time&quot;]=&gt;
       int(27)
       [&quot;min_run_time&quot;]=&gt;
       int(0)
       [&quot;max_run_time&quot;]=&gt;
       int(0)
       [&quot;min_store_time&quot;]=&gt;
       int(0)
       [&quot;max_store_time&quot;]=&gt;
       int(0)
       [&quot;avg_run_time&quot;]=&gt;
       int(0)
       [&quot;avg_store_time&quot;]=&gt;
       int(0)
     }
     [&quot;metadata&quot;]=&gt;
     array(1) {
       [0]=&gt;
       array(8) {
         [&quot;name&quot;]=&gt;
         string(2) &quot;id&quot;
         [&quot;orig_name&quot;]=&gt;
         string(2) &quot;id&quot;
         [&quot;table&quot;]=&gt;
         string(4) &quot;test&quot;
         [&quot;orig_table&quot;]=&gt;
         string(4) &quot;test&quot;
         [&quot;db&quot;]=&gt;
         string(4) &quot;schema&quot;
         [&quot;max_length&quot;]=&gt;
         int(1)
         [&quot;length&quot;]=&gt;
         int(11)
         [&quot;type&quot;]=&gt;
         int(3)
       }
     }
   }
 }
}

</pre></div>
   </div>
  </div>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.mysqlnd-qc-get-cache-info-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">
     <span class="function"><a href="function.mysqlnd-qc-get-core-stats.html" class="function" rel="rdfs-seeAlso">mysqlnd_qc_get_core_stats()</a> - Estad&iacute;sticas recopiladas por el n&uacute;cleo de la cach&eacute; de consultas</span>
    </li>
   </ul>
  </p>
 </div>

 
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysqlnd-qc-get-available-handlers.html">mysqlnd_qc_get_available_handlers</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysqlnd-qc-get-core-stats.html">mysqlnd_qc_get_core_stats</a></div>
 <div class="up"><a href="ref.mysqlnd-qc.html">Funciones de mysqlnd_qc</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
