<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Escritura de un archivo en modo binario seguro</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ftruncate.html">ftruncate</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.glob.html">glob</a></div>
 <div class="up"><a href="ref.filesystem.html">Funciones del Sistema de Archivos</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.fwrite" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">fwrite</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">fwrite</span> &mdash; <span class="dc-title">Escritura de un archivo en modo binario seguro</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.fwrite-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>fwrite</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$handle</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code></span>
  ] )</div>

  <p class="simpara">
   <span class="function"><strong>fwrite()</strong></span> escribe el contenido de
   <code class="parameter">string</code> al flujo de archivo apuntado por
   <code class="parameter">handle</code>. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.fwrite-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">handle</code></dt>

     <dd>

      <p class="para"><span class="type"><a href="language.types.resource.html" class="type Resource">Resource</a></span> que apunta a un fichero del sitema que
normalmente es creado usando <span class="function"><a href="function.fopen.html" class="function">fopen()</a></span>.</p>
     </dd>

    
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       La cadena que va a ser escrita.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       Si se da el argumento <code class="parameter">length</code>, la escritura
       se detendrá después de que <code class="parameter">length</code> bytes hayan sido escritos o
       se alcance el final de <code class="parameter">string</code>, lo que suceda
       primero.
      </p>
      <p class="para">
       Observe que si el argumento <code class="parameter">length</code> se da,
       la opción de configuración <a href="info.configuration.html#ini.magic-quotes-runtime" class="link">magic_quotes_runtime</a>
       será ignorada y no se eliminarán las barras de <code class="parameter">string</code>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.fwrite-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="simpara">
   <span class="function"><strong>fwrite()</strong></span> devuelve el número de bytes
   escritos, o <strong><code>FALSE</code></strong> si se produjo un error.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.fwrite-notes">
  <h3 class="title">Notas</h3>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Escribir en un flujo de red puede terminar antes de que se haya escrito la cadena completa.
    El valor devuelto por <span class="function"><strong>fwrite()</strong></span> se puede verificar:
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">flujo_fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cadena</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$escrito&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$escrito&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$cadena</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">$escrito&nbsp;</span><span style="color: #007700">+=&nbsp;</span><span style="color: #0000BB">$fwrite</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fwrite&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$cadena</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$escrito</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$fwrite&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$escrito</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$escrito</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </p>
  </p></blockquote>
  
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    En sistemas en los que se diferencia entre archivos binarios y de texto
    (esto es, Windows) el archivo debe ser abierto con &#039;b&#039; incluida en el
    parámetro modo de <span class="function"><a href="function.fopen.html" class="function">fopen()</a></span>.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Si <code class="parameter">handle</code> fue abierto por <span class="function"><a href="function.fopen.html" class="function">fopen()</a></span> en
    modo de adición, las escrituras de <span class="function"><strong>fwrite()</strong></span> son atómicas (a menos
    que el tamaño de <code class="parameter">string</code> exceda el tamaño de bloque del sistema
    de archivos, en algunas plataformas, siempre que el archivo esté en un sistema de
    archivos local). Es decir, no hay necesidad de bloquear un recurso con <span class="function"><a href="function.flock.html" class="function">flock()</a></span>
    antes de llamar a <span class="function"><strong>fwrite()</strong></span>; toda la información será escrita sin
    interrupciones.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Si se escribe dos veces sobre el puntero al archivo la información será añadida al
    final del contenido del archivo:
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">'data.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'w'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'1'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'23'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;¡el&nbsp;contenido&nbsp;de&nbsp;'data.txt'&nbsp;ahora&nbsp;es&nbsp;123&nbsp;y&nbsp;no&nbsp;23!<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 examples" id="refsect1-function.fwrite-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-2634">
    <p><strong>Ejemplo #1 Un ejemplo sencillo de <span class="function"><strong>fwrite()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$nombre_archivo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'prueba.txt'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$contenido&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Añade&nbsp;esto&nbsp;al&nbsp;archivo\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Primero&nbsp;vamos&nbsp;a&nbsp;asegurarnos&nbsp;de&nbsp;que&nbsp;el&nbsp;archivo&nbsp;existe&nbsp;y&nbsp;es&nbsp;escribible.<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">is_writable</span><span style="color: #007700">(</span><span style="color: #0000BB">$nombre_archivo</span><span style="color: #007700">))&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;En&nbsp;nuestro&nbsp;ejemplo&nbsp;estamos&nbsp;abriendo&nbsp;$nombre_archivo&nbsp;en&nbsp;modo&nbsp;de&nbsp;adición.<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;El&nbsp;puntero&nbsp;al&nbsp;archivo&nbsp;está&nbsp;al&nbsp;final&nbsp;del&nbsp;archivo<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;donde&nbsp;irá&nbsp;$contenido&nbsp;cuando&nbsp;usemos&nbsp;fwrite()&nbsp;sobre&nbsp;él.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$gestor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$nombre_archivo</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"No&nbsp;se&nbsp;puede&nbsp;abrir&nbsp;el&nbsp;archivo&nbsp;(</span><span style="color: #0000BB">$nombre_archivo</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Escribir&nbsp;$contenido&nbsp;a&nbsp;nuestro&nbsp;archivo&nbsp;abierto.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$contenido</span><span style="color: #007700">)&nbsp;===&nbsp;</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"No&nbsp;se&nbsp;puede&nbsp;escribir&nbsp;en&nbsp;el&nbsp;archivo&nbsp;(</span><span style="color: #0000BB">$nombre_archivo</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Éxito,&nbsp;se&nbsp;escribió&nbsp;(</span><span style="color: #0000BB">$contenido</span><span style="color: #DD0000">)&nbsp;en&nbsp;el&nbsp;archivo&nbsp;(</span><span style="color: #0000BB">$nombre_archivo</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$gestor</span><span style="color: #007700">);<br /><br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"El&nbsp;archivo&nbsp;</span><span style="color: #0000BB">$nombre_archivo</span><span style="color: #DD0000">&nbsp;no&nbsp;es&nbsp;escribible"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.fwrite-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.fread.html" class="function" rel="rdfs-seeAlso">fread()</a> - Lectura de un fichero en modo binario seguro</span></li>
    <li class="member"><span class="function"><a href="function.fopen.html" class="function" rel="rdfs-seeAlso">fopen()</a> - Abre un fichero o un URL</span></li>
    <li class="member"><span class="function"><a href="function.fsockopen.html" class="function" rel="rdfs-seeAlso">fsockopen()</a> - Abre una conexi&oacute;n v&iacute;a sockets a Internet o a un dominio Unix</span></li>
    <li class="member"><span class="function"><a href="function.popen.html" class="function" rel="rdfs-seeAlso">popen()</a> - Abre un proceso de un puntero a un fichero</span></li>
    <li class="member"><span class="function"><a href="function.file-get-contents.html" class="function" rel="rdfs-seeAlso">file_get_contents()</a> - Transmite un fichero entero a una cadena</span></li>
   </ul>
  </p>
 </div>


</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ftruncate.html">ftruncate</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.glob.html">glob</a></div>
 <div class="up"><a href="ref.filesystem.html">Funciones del Sistema de Archivos</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
