<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Devolver una conexi&oacute;n a la base de datos</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.db2-conn-errormsg.html">db2_conn_errormsg</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.db2-cursor-type.html">db2_cursor_type</a></div>
 <div class="up"><a href="ref.ibm-db2.html">Funciones de IBM DB2</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.db2-connect" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">db2_connect</h1>
  <p class="verinfo">(PECL ibm_db2 &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">db2_connect</span> &mdash; <span class="dc-title">
   Devolver una conexión a la base de datos
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.db2-connect-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname"><strong>db2_connect</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>

  
  <p class="para rdfs-comment">
   Devuelve una conexión a una base de datos IBM DB2 Universal Database, IBM
   Cloudscape o Apache Derby.
  </p>
  
 </div>

 <div class="refsect1 parameters" id="refsect1-function.db2-connect-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">database</code></dt>

     <dd>

      <p class="para">
       El alias de la base de datos en al catálogo del cliente DB2.
      </p>
      <p class="para">
       Para una conexión sin catalogar a una base de datos,
       se puede representar <code class="parameter">database</code> 
       con una cadena de conexión completa en el siguiente formato:
       <pre class="literallayout">DATABASE=<code class="parameter">database</code>;HOSTNAME=<code class="parameter">hostname</code>;PORT=<code class="parameter">port</code>;PROTOCOL=TCPIP;UID=<code class="parameter">username</code>;PWD=<code class="parameter">password</code>;</pre> 
       donde los parámetros representan los siguientes valores:
       <dl>

        
         <dt>
<code class="parameter">database</code></dt>

         <dd>

          <p class="para">
           El nombre de la base de datos.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">hostname</code></dt>

         <dd>

          <p class="para">
           El Host o la IP del servidor de la base de datos.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">port</code></dt>

         <dd>

          <p class="para">
           El puerto TCP/IP sobre el cual la base de datos está escuchando solicitudes.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">username</code></dt>

         <dd>

          <p class="para">
           El usuario con el que se conecta a la base de datos.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">password</code></dt>

         <dd>

          <p class="para">
           La contraseña con la que se conecta a la base de datos.
          </p>
         </dd>

        
       </dl>

      </p>
     </dd>

    
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       El usuario con el que se conecta a la base de datos.
      </p>
      <p class="para">
       Para conexiones sin catalogar se debe pasar <strong><code>NULL</code></strong> o una 
       cadena vacia.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">password</code></dt>

     <dd>

      <p class="para">
       La contraseña con la que se conecta a la base de datos.
      </p>
      <p class="para">
       Para conexiones sin catalogar se debe pasar <strong><code>NULL</code></strong> o una 
       cadena vacia.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       Un arreglo asociativo de opciones que afectan el comportamiento de 
       la conexión, entre las claves válidas están:
       <dl>

        
         <dt>
<code class="parameter">autocommit</code></dt>

         <dd>

          <p class="para">
           Si se pasa el valor  <em>DB2_AUTOCOMMIT_ON</em> se  
           confirmarán automáticamente las transacciones de la conexión.
          </p>
          <p class="para">
           Si se pasa el valor <em>DB2_AUTOCOMMIT_OFF</em> no se 
           confirmarán automáticamente las transacciones de la conexión.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">DB2_ATTR_CASE</code></dt>

         <dd>

          <p class="para">
           Si se pasa el valor <em>DB2_CASE_NATURAL</em> los nombres 
           de las columnas serán devueltos con sus mayúsculas y minúsculas originales.
          </p>
          <p class="para">
           Si se pasa el valor <em>DB2_CASE_LOWER</em> los nombres 
           de las columnas serán devueltos en minúsculas.
          </p>
          <p class="para">
           Si se pasa el valor <em>DB2_CASE_UPPER</em> los nombres 
           de las columnas serán devueltos en mayúsculas.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">CURSOR</code></dt>

         <dd>

          <p class="para">
           Si se pasa el valor <em>DB2_FORWARD_ONLY</em> se establece 
           un cursor de no-recorrido (sólo hacia adelante). Este cursor es predeterminado 
           y soportado por todos los servidores de base de datos.
          </p>
          <p class="para">
           Si se pasa el valor <em>DB2_SCROLLABLE</em> se establece 
           un cursor de recorrido. Con este modo es posible acceder de manera 
           aleatoria a las filas del resultado pero actualmente sólo es soportado 
           por IBM DB2 Universal Database.
          </p>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       Las siguientes opciones están disponibles en las versiones 1.7.0 y superiores de 
       ibm_db2.
       <dl>

        
         <dt>
<code class="parameter">trustedcontext</code></dt>

         <dd>

          <p class="para">
           Si se pasa el valor DB2_TRUSTED_CONTEXT_ENABLE se establece una conexión 
           de confianza. Este parámetro no puede ser establecido mediante  
           <span class="function"><a href="function.db2-set-option.html" class="function">db2_set_option()</a></span>.
          </p>
          <p class="para">
           Esta clave solo funciona si la base de datos está catalogada (aún cuando  
           la base de datos sea local), o si se especifica un DSN completo cuando se   
           crea la conexión.
          </p>
          <p class="para">
           Para catalogar la base de datos se usan los siguientes comandos:
          </p>
          <p class="para">
           <pre class="literallayout">db2 catalog tcpip node loopback remote &lt;SERVERNAME&gt; server &lt;SERVICENAME&gt;
            db2 catalog database &lt;LOCALDBNAME&gt; as &lt;REMOTEDBNAME&gt; at node loopback
            db2 &quot;update dbm cfg using svcename &lt;SERVICENAME&gt;&quot;
            db2set DB2COMM=TCPIP</pre>
          </p>
         </dd>

                     
       </dl>

      </p>     
      <p class="para">
       Las siguientes opciones i5/OS están disponibles en las versiones 1.5.1 y superiores de ibm_db2.
       <dl>

        
         <dt>
<code class="parameter">i5_lib</code></dt>

         <dd>

          <p class="para">
           Una cadena que indica la lista de bibliotecas que se utilizará por default para resolver 
           referencias no evaluadas a archivos. Este parámetro no es válido  
           si en la conexión se utiliza el modo de nombrado de sistema.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_naming</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_NAMING_ON</em> habilita el modo de nombrado de sistema DB2 UDB CLI iSeries.
           Los archivos son evaluados utilizando una diagonal (/) como delimitador. 
           Los archivos que no pueden ser evaluados son resueltos utilizando la lista de bibliotecas.
          </p>
          <p class="para">
           <em>DB2_I5_NAMING_OFF</em> esta valor predeterminado habilita el modo de nombrado DB2 UDB CLI,  
           que es el sistema de nombrado de SQL. Los archivos son evaluados utilizando un punto (.) 
           como delimitador. Los archivos que no se pueden evaluar son resueltos utilizando tanto la biblioteca predeterminada 
           como el identificador del usuario actual.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_commit</code></dt>

         <dd>

          <p class="para">
           Se recomienda establecer el parámetro <code class="parameter">i5_commit</code> antes que  
           <span class="function"><a href="function.db2-pconnect.html" class="function">db2_pconnect()</a></span>. Si el valor es modificado después de que la conexión ha  
           sido establecida y la conexión es hacia una fuente remota, el cambio no tendrá efecto hasta
           la siguiente llamada exitosa a <span class="function"><a href="function.db2-pconnect.html" class="function">db2_pconnect()</a></span> para el manejo de conexión.
           <blockquote class="note"><p><strong class="note">Nota</strong>: 
            <p class="para">
             El parámetro <code class="parameter">ibm_db2.i5_allow_commit</code>==0 en php.ini o 
             <em>DB2_I5_TXN_NO_COMMIT</em> son opciones predeterminadas pero pueden ser remplazadas  
             con la opción <code class="parameter">i5_commit</code>.
            </p>
           </p></blockquote>           
          </p>
          <p class="para">
           <em>DB2_I5_TXN_NO_COMMIT</em> - No se utiliza ningún control de transacciones.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_READ_UNCOMMITTED</em> - Se permiten lecturas sucias, lecturas no repetibles,  
           y lecturas fantasma.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_READ_COMMITTED</em> - No se permiten lecturas sucias. Se permiten  
           lecturas no repetibles y lecturas fantasma.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_REPEATABLE_READ</em> - No se permiten lecturas sucias ni lecturas  
           no repetibles. Se permiten lecturas fantasma.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_SERIALIZABLE</em> - Las transacciones son serializables. 
           No se permiten lecturas sucias, lecturas no repetibles ni lecturas fantasma.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_query_optimize</code></dt>

         <dd>

          <p class="para">
           <em>DB2_FIRST_IO</em> - Todas las consultas son optimazadas con el objetivo de  
           devolver la primera página de resultados lo más rápido posible. Esta opción se recomienda cuando el resultado    
           es controlado por un usuario que puede cancelar la consulta después de  
           visualizar la primera página de resultados. Esta funcionalidad también se puede lograr utilizando OPTIMIZE FOR nnn ROWS 
           en una consulta.
          </p>
          <p class="para">
           <em>DB2_ALL_IO</em> - Todas las consultas son optimizadas con el objetivo de ejecutar  
           la consulta completa en el menor tiempo posible. Esta opción predeterminada se recomienda cuando el resultado de 
           una consulta es escrito en un archivo o reporte. Esta funcionalidad tambien se puede lograr utilizando OPTIMIZE FOR nnn ROWS 
           en una consulta. 
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_dbcs_alloc</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_DBCS_ALLOC_ON</em> habilita el esquema de alojamiento DB2 6X para  
           incremento de tamaño en columnas de traducción DBCS.
          </p>
          <p class="para">
           <em>DB2_I5_DBCS_ALLOC_OFF</em> deshabilita el esquema de alojamiento DB2 6X para  
           incremento de tamaño en columnas de traducción DBCS. 
          </p>
          <p class="para">
           Nota: El parámetro <code class="parameter">ibm_db2.i5_dbcs_alloc</code>==0 en php.ini o 
           <em>DB2_I5_DBCS_ALLOC_OFF</em> son opciones predeterminadas pero pueden ser remplazadas con  
           la opción <code class="parameter">i5_dbcs_alloc</code>.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_date_fmt</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_FMT_ISO</em> - Se utiliza el formato de fechas estandar (ISO) yyyy-mm-dd. 
           Esta opción es predeterminada.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_USA</em> - Se utiliza el formato de fechas de Estados Unidos mm/dd/yyyy.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_EUR</em> - Se utiliza el formato de fechas Europeo dd.mm.yyyy.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JIS</em> - Se utiliza el formato de fechas Japonés yyyy-mm-dd. 
          </p>
          <p class="para">
           <em>DB2_I5_FMT_MDY</em> - Se utiliza el formato de fechas mm/dd/yyyy. 
          </p>
          <p class="para">
           <em>DB2_I5_FMT_DMY</em> - Se utiliza el formato de fechas dd/mm/yyyy.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_YMD</em> - Se utiliza el formato de fechas yy/mm/dd.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JUL</em> - Se utiliza el formato de fechas Juliano yy/ddd.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JOB</em> - El formato de trabajo es utilizado.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_date_sep</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_SEP_SLASH</em> - Se utiliza una diagonal ( / ) como separador de fechas. 
           Esta opción es predeterminada.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_DASH</em> - Se utiliza un guión medio ( - ) como separador de fechas.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_PERIOD</em> - Se utiliza un punto ( . ) como separador de fechas.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_COMMA</em> - Se utiliza una coma ( , ) como separador de fechas.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_BLANK</em> - Se utiliza un espacio como separador de fechas.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_JOB</em> - Se utiliza el separador de fechas de trabajo.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_time_fmt</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_FMT_ISO</em> - Se utiliza el formato de tiempo estandar (ISO) hh.mm.ss. 
           Esta opción es predeterminada.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_USA</em> - Se utiliza el formato de tiempo de Estados Unidos hh:mmxx, donde xx es AM o PM.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_EUR</em> - Se utiliza el formato de tiempo Europeo hh.mm.ss.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JIS</em> - Se utiliza el formato de tiempo Japonés hh:mm:ss.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_HMS</em> - Se utiliza el formato de tiempo hh:mm:ss.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_time_sep</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_SEP_COLON</em> - Se utiliza el signo de dos puntos ( : ) como separador de tiempo. Esta opción es predeterminada.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_PERIOD</em> - Se utiliza un punto ( . ) como separador de tiempo.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_COMMA</em> - Se utiliza una coma ( , ) como separador de tiempo.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_BLANK</em> - Se utiliza un espacio como separador de tiempo.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_JOB</em> - Se utiliza el separador de tiempo de trabajo.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_decimal_sep</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_SEP_PERIOD</em> - Se utiliza un punto ( . ) como separador decimal. Esta opción es predeterminada.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_COMMA</em> - Se utiliza una coma ( , ) como separador decimal.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_JOB</em> - Se utiliza el separador decimal de trabajo.
          </p>
         </dd>

        
       </dl>

      </p>
      <p class="para">
       La siguiente opción i5/OS está disponible en las versiones 1.8.0 y superiores de ibm_db2. 
       <dl>

        
         <dt>
<code class="parameter">i5_libl</code></dt>

         <dd>

          <p class="para">
           Un cadena que indica la lista de bibliotecas que se utilizará para resolver  
           referencias no evaluadas a archivos. Se especifican los elementos de la lista  
           separados por espacios &#039;i5_libl&#039;=&gt;&quot;LIBRERIA1 LIBRERIA2 LIBRERIA3&quot;.
          </p>
          <blockquote class="note"><p><strong class="note">Nota</strong>: 
           <p class="para">
            i5_libl llama a qsys2/qcmdexc(&#039;cmd&#039;,cmdlen), que sólo está disponible en  
            i5/OS V5R4 y versiones superiores.
           </p>
          </p></blockquote>
         </dd>

                 
       </dl>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.db2-connect-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   Devuelve un recurso de conexión si el intento de conexión es exitoso. 
   Si el intento de conexión falla <span class="function"><strong>db2_connect()</strong></span>
   devuelve <strong><code>FALSE</code></strong>.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.db2-connect-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-1247">
    <p><strong>Ejemplo #1 Creando una conexión catalogada</strong></p>
    <div class="example-contents"><p>
     Las conexiones catalogadas requieren que previamente se haya guardado la configuración 
     mediante la consola DB2 Command Line Processor (CLP) o el asistente DB2
     Configuration Assistant.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connection&nbsp;succeeded."</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connection&nbsp;failed."</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Connection succeeded.
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1248">
    <p><strong>Ejemplo #2 Creando una conexión no catalogada</strong></p>
    <div class="example-contents"><p>
     Con una conexión no catalogada es posible conectarse de manera dinámica a la base de datos.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=</span><span style="color: #0000BB">$database</span><span style="color: #DD0000">;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"HOSTNAME=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;PORT=</span><span style="color: #0000BB">$port</span><span style="color: #DD0000">;PROTOCOL=TCPIP;UID=</span><span style="color: #0000BB">$user</span><span style="color: #DD0000">;PWD=</span><span style="color: #0000BB">$password</span><span style="color: #DD0000">;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connection&nbsp;succeeded."</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connection&nbsp;failed."</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Connection succeeded.
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1249">
    <p><strong>Ejemplo #3 Creando una conexión con confirmaciones automáticas de transacciones deshabilitadas</strong></p>
    <div class="example-contents"><p>
     Si se pasa un arreglo de opciones a <span class="function"><strong>db2_connect()</strong></span> se puede modificar 
     el conportamiento predeterminado de la conexión.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connection&nbsp;succeeded.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">db2_autocommit</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Autocommit&nbsp;is&nbsp;on.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Autocommit&nbsp;is&nbsp;off.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connection&nbsp;failed."</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Connection succeeded.
Autocommit is off.
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1250">
    <p><strong>Ejemplo #4 Optimizando en i5/OS</strong></p>
    <div class="example-contents"><p>
     Para lograr un mejor rendimiento en las aplicaciones de i5/OS ibm_db2 1.5.1 se puede  
     usar el Host, usuario y contraseña predeterminados en <span class="function"><strong>db2_connect()</strong></span>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$library&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"ADC"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i5&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"i5_lib"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"qsys2"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$i5</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;systables&nbsp;where&nbsp;table_schema&nbsp;=&nbsp;'</span><span style="color: #0000BB">$library</span><span style="color: #DD0000">'"</span><span style="color: #007700">);<br />&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_fetch_both</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'TABLE_NAME'</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;/br&gt;"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$i5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
ANIMALS
NAMES
PICTURES
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1251">
    <p><strong>Ejemplo #5 Usando contexto de confianza</strong></p>
    <div class="example-contents"><p>
     El siguiente ejemplo muestra como habilitar el contexto de confianza, cambia usuarios y 
     obtiene el identificador del usuario actual.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SAMPLE"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$authID&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"db2inst1"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$auth_pass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"ibmdb2"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$tc_user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"tcuser"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tc_pass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"tcpassword"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$dsn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DATABASE=</span><span style="color: #0000BB">$database</span><span style="color: #DD0000">;HOSTNAME=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;PORT=</span><span style="color: #0000BB">$port</span><span style="color: #DD0000">;<br />&nbsp;&nbsp;PROTOCOL=TCPIP;UID=</span><span style="color: #0000BB">$authID</span><span style="color: #DD0000">;PWD=</span><span style="color: #0000BB">$auth_pass</span><span style="color: #DD0000">;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">"trustedcontext"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_TRUSTED_CONTEXT_ENABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$tc_conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$dsn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br />if(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Explicit&nbsp;trusted&nbsp;connection&nbsp;succeeded.\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trustedcontext"</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$userBefore&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trusted_user"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Do&nbsp;some&nbsp;work&nbsp;as&nbsp;user&nbsp;1.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Switching&nbsp;to&nbsp;trusted&nbsp;user.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"trusted_user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$tc_user</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"trusted_password"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$tcuser_pass</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$userAfter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trusted_user"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Do&nbsp;more&nbsp;work&nbsp;as&nbsp;trusted&nbsp;user.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$userBefore&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">$userAfter</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"User&nbsp;has&nbsp;been&nbsp;switched."&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">);<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Explicit&nbsp;trusted&nbsp;connection&nbsp;failed.\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Explicit trusted connection succeeded.
User has been switched.
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.db2-connect-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.db2-close.html" class="function" rel="rdfs-seeAlso">db2_close()</a> - Cierra una conexi&oacute;n a base de datos</span></li>
    <li class="member"><span class="function"><a href="function.db2-pconnect.html" class="function" rel="rdfs-seeAlso">db2_pconnect()</a> - Devolver una conexi&oacute;n persistente a la base de datos</span></li>
   </ul>
  </p>
 </div>

 
 
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.db2-conn-errormsg.html">db2_conn_errormsg</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.db2-cursor-type.html">db2_cursor_type</a></div>
 <div class="up"><a href="ref.ibm-db2.html">Funciones de IBM DB2</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
