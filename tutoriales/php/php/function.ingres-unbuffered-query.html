<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Env&iacute;a una consulta SQL no almacenada en b&uacute;fer a Ingres</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ingres-set-environment.html">ingres_set_environment</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.maxdb.html">MaxDB</a></div>
 <div class="up"><a href="ref.ingres.html">Funciones de Ingres</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.ingres-unbuffered-query" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ingres_unbuffered_query</h1>
  <p class="verinfo">(No hay información de versión disponible, podría estar únicamente en SVN)</p><p class="refpurpose"><span class="refname">ingres_unbuffered_query</span> &mdash; <span class="dc-title">Envía una consulta SQL no almacenada en búfer a Ingres</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.ingres-unbuffered-query-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>ingres_unbuffered_query</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$params</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$types</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>ingres_unbuffered_query()</strong></span> sends the given
   <code class="parameter">query</code> to the Ingres server. 
  </p>
  <p class="para">
   La consulta es parte de la transacción abierta actualmente. Si
   no hay ninguna transacción abierta, <span class="function"><strong>ingres_unbuffered_query()</strong></span>
   abrirá una nueva. Para cerrar la transacción, se puede
   llamar tanto a <span class="function"><a href="function.ingres-commit.html" class="function">ingres_commit()</a></span> para consignar los cambios
   hechos a la base de datos, como a <span class="function"><a href="function.ingres-rollback.html" class="function">ingres_rollback()</a></span> para
   cancelar dichos cambios. Cuando el script finaliza, cualquier transacción abierta
   será revertida (invocando a
   <span class="function"><a href="function.ingres-rollback.html" class="function">ingres_rollback()</a></span>). También se puede usar
   <span class="function"><a href="function.ingres-autocommit.html" class="function">ingres_autocommit()</a></span> antes de abrir una nueva
   transacción para que cada consulta SQL sea consignada automáticamente.
   Igres solamente permite la activación de una sentencia almacenada en búfer.
   La extensión cerrará cualquier sentencia no almacenada en búfer activa antes
   de ejecuatar una sentencia SQL. Además, no se puede usar
   <span class="function"><a href="function.ingres-result-seek.html" class="function">ingres_result_seek()</a></span> para posicionar la fila antes
   de la obtención.
  </p>
  
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <strong>Configuraciones relacionadas</strong><br />
   <p class="para">
    Véanse tambén las directivas <a href="ingres.configuration.html#ini.ingres.describe" class="link">ingres.describe</a>
    y <a href="ingres.configuration.html#ini.ingres.utf8" class="link">ingres.utf8</a> en la sección
    <a href="ingres.configuration.html" class="link">Configuración en tiempo de ejecución</a>.
   </p>
  </p></blockquote>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.ingres-unbuffered-query-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">link</code></dt>

     <dd>

      <p class="para">
       El identificador de enlace de la conexión
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">query</code></dt>

     <dd>

      <p class="para">
       Una consulta SQL válida (véase la <em class="emphasis">Guía de referencia de
       SQL</em> en la documentación de Ingres).
       Véase el parámetor <a href="function.ingres-query.html#function.ingres-query.query" class="link">query</a>
       de <span class="function"><a href="function.ingres-query.html" class="function">ingres_query()</a></span> para una lista de las
       sentencias SQL que no se pueden ejecutar mediante
       <span class="function"><strong>ingres_unbuffered_query()</strong></span>.
      </p>
      <p class="para">
       Los datos dentro de la consulta deberían estar <a href="function.ingres-escape-string.html" class="link">apropiadamente escapados</a>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">params</code></dt>

     <dd>

      <p class="para">
       Un array de valores de parámetros para usarlos con la consulta
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">types</code></dt>

     <dd>

      <p class="para">
       Un string que contiene una secuencia de los tipos de los valores de los parámetros
       pasados. Véaes el parámetro <a href="function.ingres-query.html#function.ingres-query.types" class="link">types</a> de
       <span class="function"><a href="function.ingres-query.html" class="function">ingres_query()</a></span> para una lista de los códigos de los tipos.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.ingres-unbuffered-query-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   <span class="function"><strong>ingres_unbuffered_query()</strong></span> devuelve un identificador de resultados de consulta
   cuando hay más filas que obtener, o <strong><code>FALSE</code></strong> cuando no hay más filas, como en el
   case de las sentencias sentencia INSERT, UPDATE o DELETE. Para comprobar si ocurrió
   un error, use <span class="function"><a href="function.ingres-errno.html" class="function">ingres_errno()</a></span>, 
   <span class="function"><a href="function.ingres-error.html" class="function">ingres_error()</a></span> o
   <span class="function"><a href="function.ingres-errsqlstate.html" class="function">ingres_errsqlstate()</a></span>.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.ingres-unbuffered-query-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-1326">
    <p><strong>Ejemplo #1 Ejecutar un SELECT sencillo no almacenado en búfer</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$enlace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"demodb"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$resultado&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_unbuffered_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$enlace</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;user_profile"</span><span style="color: #007700">);<br />while&nbsp;(</span><span style="color: #0000BB">$fila&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_fetch_row</span><span style="color: #007700">(</span><span style="color: #0000BB">$resultado</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">];<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-1327">
    <p><strong>Ejemplo #2 Passing query parameters to <span class="function"><strong>ingres_unbuffered_query()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$enlace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"demodb"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$params</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #DD0000">"Emma"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;user_profile&nbsp;where&nbsp;up_first&nbsp;=&nbsp;?"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$resultado&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_unbuffered_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$enlace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br />while&nbsp;(</span><span style="color: #0000BB">$fila&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_fetch_row</span><span style="color: #007700">(</span><span style="color: #0000BB">$resultado</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$fila</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">];<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-1328">
    <p><strong>Ejemplo #3 Insertar datos BLOB con tipos de parámetros</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$enlace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"demodb"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//Abrir&nbsp;una&nbsp;foto<br /></span><span style="color: #0000BB">$fh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"photo.jpg"</span><span style="color: #007700">,</span><span style="color: #DD0000">"r"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$datos_blob&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$fh</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fh</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//Preparar&nbsp;los&nbsp;parámetros<br /></span><span style="color: #0000BB">$parámetros</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">$datos_blob</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$parámetros</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">1201</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//Definir&nbsp;los&nbsp;tipos&nbsp;de&nbsp;parámetros<br /></span><span style="color: #0000BB">$tipos_parámetros&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Bi"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$consulta&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"update&nbsp;user_profile&nbsp;set&nbsp;up_image&nbsp;=&nbsp;?&nbsp;where&nbsp;up_id&nbsp;=&nbsp;?"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$resultado&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ingres_unbuffered_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$enlace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$consulta&nbsp;</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parámetros</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tipos_parámetros</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">ingres_errno</span><span style="color: #007700">())<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">ingres_errno</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"-"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">ingres_error</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.ingres-unbuffered-query-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ingres-query.html" class="function" rel="rdfs-seeAlso">ingres_query()</a> - Env&iacute;a una consulta SQL a Ingres</span></li>
    <li class="member"><span class="function"><a href="function.ingres-fetch-array.html" class="function" rel="rdfs-seeAlso">ingres_fetch_array()</a> - Obtiene una fila de resultados en un array</span></li>
    <li class="member"><span class="function"><a href="function.ingres-fetch-assoc.html" class="function" rel="rdfs-seeAlso">ingres_fetch_assoc()</a> - Obtienen una fila de resultados en un array asociativo</span></li>
    <li class="member"><span class="function"><a href="function.ingres-fetch-object.html" class="function" rel="rdfs-seeAlso">ingres_fetch_object()</a> - Obtiene una fila de resultados en un objeto</span></li>
    <li class="member"><span class="function"><a href="function.ingres-fetch-row.html" class="function" rel="rdfs-seeAlso">ingres_fetch_row()</a> - Obtiene una fila de resultados en un array enumerado</span></li>
    <li class="member"><span class="function"><a href="function.ingres-commit.html" class="function" rel="rdfs-seeAlso">ingres_commit()</a> - Consigna una trasacci&oacute;n</span></li>
    <li class="member"><span class="function"><a href="function.ingres-rollback.html" class="function" rel="rdfs-seeAlso">ingres_rollback()</a> - Revierte una transacci&oacute;n</span></li>
    <li class="member"><span class="function"><a href="function.ingres-autocommit.html" class="function" rel="rdfs-seeAlso">ingres_autocommit()</a> - Activa o desactiva la autoconsigna</span></li>
    <li class="member"><span class="function"><a href="function.ingres-set-environment.html" class="function" rel="rdfs-seeAlso">ingres_set_environment()</a> - Establece las caracter&iacute;sticas de entorno que controlan las opciones de salida</span></li>
    <li class="member"><span class="function"><a href="function.ingres-errno.html" class="function" rel="rdfs-seeAlso">ingres_errno()</a> - Obtiene el n&uacute;mero del &uacute;ltimo error generado de Ingres</span></li>
    <li class="member"><span class="function"><a href="function.ingres-error.html" class="function" rel="rdfs-seeAlso">ingres_error()</a> - Obtener un mensaje de error coherente del &uacute;ltimo error generado</span></li>
   </ul>
  </p>
 </div>

 
</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.ingres-set-environment.html">ingres_set_environment</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.maxdb.html">MaxDB</a></div>
 <div class="up"><a href="ref.ingres.html">Funciones de Ingres</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
